(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],d=0,f=[];d<r.length;d++)o=r[d],i[o]&&f.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==i[c]&&(s=!1)}s&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},i={app:0},a=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/enka/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2856:function(t,e,n){},"2fb4":function(t,e,n){},4678:function(t,e,n){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=a(t);return n(e)}function a(t){var e=s[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(s)},i.resolve=a,t.exports=i,i.id="4678"},"56d7":function(t,e,n){"use strict";n.r(e);n("7f7f"),n("28a5"),n("7514"),n("d25f"),n("cadf"),n("551c"),n("097d");var s=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isInited,expression:"isInited"}],attrs:{id:"app"}},[n("app-header",{ref:"header",attrs:{items:t.menu},on:{onSelect:t.onMenuClick}}),n("app-main",{ref:"profile"}),n("app-quests",{ref:"actions"}),n("app-gifts",{ref:"gifts"}),n("app-popup",{ref:"popup"})],1)},a=[],o=n("c93e"),r=n("2f62"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"header",class:{white:t.scrolled}},[n("div",{staticClass:"wrapper"},[n("a",{staticClass:"logo",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onClickLogo(e)}}}),n("div",{staticClass:"header-right"},[n("div",{staticClass:"menu"},t._l(t.items,function(e,s){return n("a",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!item.hide"}],key:s,class:{act:t.active===e.alias},attrs:{href:e.href||"#",target:e.target},on:{click:function(n){n.preventDefault(),t.onClick(e)}}},[t._v(t._s(e.name))])}))])])]),n("a",{staticClass:"mob-menu-open",class:{"close-menu":t.opened},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.opened=!t.opened}}}),n("div",{staticClass:"mob-menu-overlay",class:{show:t.opened}},[n("div",{staticClass:"menu"},t._l(t.items,function(e,s){return n("a",{key:s,class:{act:t.active===e.alias},attrs:{href:e.href||"#",target:e.target},on:{click:function(n){n.preventDefault(),t.onClick(e)}}},[t._v(t._s(e.name))])}))])])},l=[],u=n("0f32"),d=n.n(u),f={name:"AppHeader",props:{items:{type:Array}},data:function(){return{scrolled:!1,opened:!1,active:!1}},computed:Object(o["a"])({},Object(r["b"])(["remoteConfig"])),methods:{onClickLogo:function(){window.scrollTo(0,0)},onClick:function(t){return this.opened=!1,t.ref?this.$emit("onSelect",t):window.open(t.href,t.target),!1},onScroll:function(){var t=parseInt(window.pageYOffset||document.documentElement.scrollTop);if(this.scrolled=t>0,this.items){var e=this.items.filter(function(t){return!t.hide});if(e){var n=e.filter(function(e){var n=e.ref.$el&&e.ref.$el.getBoundingClientRect();if(n){var s=document.querySelector(".header").clientHeight,i=parseInt(n.top+window.pageYOffset-s);return i<=t}});n&&n.length&&(this.active=n.pop().alias)}}}},beforeMount:function(){this.onScroll(),window.addEventListener("scroll",d()(this.onScroll,100))},beforeDestroy:function(){window.removeEventListener("scroll",d()(this.onScroll,100))}},_=f,p=n("2877"),m=Object(p["a"])(_,c,l,!1,null,null,null);m.options.__file="AppHeader.vue";var h=m.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top"},[n("div",{staticClass:"top-pattern"}),n("div",{staticClass:"wrapper"},[n("div",{staticClass:"top-img"}),n("div",{staticClass:"left"},[n("div",{staticClass:"user-info"},[n("div",{staticClass:"info"},[n("span",{staticClass:"name"},[t._v(t._s(t.currentUser&&t.currentUser.name)+", "),n("strong",[t._v("Manager")])]),n("span",{staticClass:"address"},[t._v("\n                            New York\n                        ")])])]),n("div",{staticClass:"about"},[t._m(0),n("span",{staticClass:"desc open-sans"},[t._v("\n                        Complete actions for points and exchange points for rewards.\nCollect badges and participate in giveaways. Good luck!\n                    ")]),n("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isOpenPopup=!0}}},[t._v("More info")])])]),n("div",{staticClass:"right"},[n("div",{staticClass:"ball",class:{type_full:!t.nextGift}},[n("span",{staticClass:"ball-num"},[n("strong",[t._v(t._s(t.currentPoints||0)+" "),n("strong",[t._v(t._s(t._f("pluralize")(t.currentPoints,"point,points,points")))])])]),n("a",{staticClass:"right-btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openHistory(e)}}},[t._v("Spend points")])]),t.nextGift?n("div",{staticClass:"next"},[n("div",{staticClass:"img img1"}),n("span",{staticClass:"text open-sans"},[n("span",{staticClass:"text-wrap"},[t._v("\n                            "+t._s(t.nextGift.points-t.currentPoints)+" points left until your next reward\n                        ")])])]):t._e()])]),t.isOpenPopup?n("div",{staticClass:"popup"},[n("div",{staticClass:"popup-inner popup-inner-about"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isOpenPopup=!1}}}),n("span",{staticClass:"head"},[t._v("\n                    Rules of the rewards program\n                ")]),t._m(1)])]):t._e()])},g=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"head"},[t._v("Welcome to "),n("br"),t._v("\nLuxoft Rewards")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"desk"},[n("strong",[t._v("Introduction")]),t._v("\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n                    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n"),n("br"),n("br"),n("strong",[t._v("How to earn bonus points?")]),t._v("\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n                    "),n("br"),n("br"),n("strong",[t._v("How to spend bonus points and receive rewards?")]),t._v("\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\n                    "),n("br"),n("br"),n("strong",[t._v("Troubleshooting")]),t._v("\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n                ")])}],b={name:"AppMain",data:function(){return{isOpenPopup:!1}},computed:Object(o["a"])({},Object(r["b"])(["currentUser","currentPoints","nextGift"])),watch:{isOpenPopup:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},methods:{onChangeAvatar:function(t){var e=this,n=t.target&&t.target.files&&t.target.files[0];this.$store.dispatch("changeAvatar",n).then(function(){e.$store.dispatch("fetchUser")})},scrollToGift:function(t){this.$eventBus.$emit("giftOpen",t)},openProfile:function(){this.$eventBus.$emit("popup","profile")},openHistory:function(){this.$eventBus.$emit("popup","history")}}},C=b,y=Object(p["a"])(C,v,g,!1,null,null,null);y.options.__file="AppMain.vue";var E=y.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"gift"},[t._m(0),n("div",{ref:"categoryBar",staticClass:"line-wrap"},[t.isInited&&t.sortedGiftList&&t.sortedGiftList.length?n("div",{staticClass:"wrapper"},[n("div",{staticClass:"coll"},t._l(t.sortedGiftList,function(e,s){return n("div",{key:s,ref:"gift_"+e.id,refInFor:!0,staticClass:"gift-item"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:e.data.image}})]),n("div",{staticClass:"info"},[n("span",{staticClass:"name",on:{click:function(n){n.preventDefault(),t.openGift(e)}}},[t._v(t._s(e.name))]),n("span",{staticClass:"ball"},[t._v("\n                                "+t._s(e.points)+" "+t._s(t._f("pluralize")(e.points,"point,points,points"))+"\n                            ")])]),n("div",{staticClass:"gift-hover"},[n("div",{staticClass:"center"},[n("span",{staticClass:"name"},[t._v(t._s(e.name))]),n("span",{staticClass:"desc"},[t._v(t._s(e.data.description))])]),e.points<=t.currentPoints?n("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.openGift(e)}}},[t._v("Get for "+t._s(e.points)+" "+t._s(t._f("pluralize")(e.points,"point,points,points")))]):n("span",{staticClass:"red-btn red-btn-dis"},[t._v("Not enough  "+t._s(e.points-t.currentPoints)+" "+t._s(t._f("pluralize")(e.points-t.currentPoints,"point,points,points")))])])])}))]):t._e(),t._m(1)]),t.gift&&!t.success?n("div",{staticClass:"popup"},[n("div",{staticClass:"popup-inner popup-inner-gift"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.gift=!1}}}),n("div",{staticClass:"info"},[n("span",{staticClass:"name"},[t._v(t._s(t.gift.name))]),n("span",{staticClass:"desc"},[t._v(t._s(t.gift.data.description))]),t.gift.points<=t.currentPoints?n("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.getGift(t.gift)}}},[t._v("Redeem for "+t._s(t.gift.points)+" "+t._s(t._f("pluralize")(t.gift.points,"point,points,points")))]):n("span",{staticClass:"red-btn cancel"},[t._v("Not enough points(")])]),n("div",{staticClass:"img"},[n("img",{attrs:{src:t.gift.data.image}})]),n("div",{staticClass:"bottom"},[t._v("\n                    Rewards can take up to 7 business days to be delivered\n                ")])])]):t._e(),t.gift&&t.success?n("div",{staticClass:"popup"},[n("div",{staticClass:"popup-inner popup-inner-gift popup-inner-gift-congr"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.success=null,t.gift=null}}}),t._m(2)])]):t._e()])},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("span",{staticClass:"block-head"},[t._v("\n                Rewards for you\n            ")]),n("span",{staticClass:"block-desc"},[t._v("\n                We value your initiative. Exchange earned bonus points for exciting rewards!\n            ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"link-wrap"},[n("a",{staticClass:"link",attrs:{href:"#"}},[t._v("\n                    Terms and Conditions\n                ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info"},[n("span",{staticClass:"name"},[t._v("Congratulations!")]),n("span",{staticClass:"desc"},[t._v("\n                        Your redemption request can take up to 7 business days to be processed.\nFor information on the status of your request please contact hr@placeholder.com\n                    ")]),n("a",{staticClass:"red-btn",attrs:{href:"#"}},[t._v("Continue")])])}],D=(n("55dd"),n("f751"),100),w=100,P={name:"AppGifts",data:function(){return{isMobile:!1,lineWidth:0,isMounted:!1,holding:!1,fixed:!1,gift:null,success:null}},watch:{isInited:function(){this.updateLineWidth()}},computed:Object(o["a"])({},Object(r["b"])(["isInited","currentUser","currentPoints","giftList"]),{sortedGiftList:function(){var t=this.giftList&&Object.assign([],this.giftList);return t&&t.sort(function(t,e){return t.points-e.points})}}),filters:{json:function(t){return JSON.stringify(t,null,2)}},methods:{openGift:function(t){this.gift=Object.assign({},t)},updateLineWidth:function(){var t=this;if(window.innerWidth<1024?this.isMobile=!0:this.isMobile=!1,this.sortedGiftList){var e=this.sortedGiftList.filter(function(e){return e.points<=t.currentPoints}),n=0;if(e.length){var s=this.$refs["checkpoint_"+e.length];if(s&&s[0]){var i=s[0].getBoundingClientRect();n=i.left+i.width}}else n=0;this.lineWidth=n}},getGift:function(t){var e=this;this.holding||(this.holding=!0,this.$store.dispatch("getGift",t).then(function(t){e.success=t,e.$store.dispatch("fetchUser"),e.$store.dispatch("fetchHistory"),e.$store.dispatch("fetchGifts"),e.holding=!1}))},onScrollTo:function(t){var e=this.$refs["gift_"+t]||this.$refs["mobile_gift_"+t];if(e){var n=e[0].getBoundingClientRect(),s=document.querySelector(".header").clientHeight,i=n.top+window.pageYOffset-s;0!==i&&window.scrollTo(n.left,i)}},onScroll:function(){if(this.$refs["categoryBar"]){var t=window.pageYOffset||document.documentElement.scrollTop,e=this.$refs["categoryBar"].getBoundingClientRect(),n=e.top+window.pageYOffset;t>=n&&t<n+e.height?this.fixed=!0:this.fixed=!1}}},beforeMount:function(){window.addEventListener("resize",d()(this.updateLineWidth,w)),window.addEventListener("scroll",d()(this.onScroll,D))},beforeDestroy:function(){window.removeEventListener("resize",d()(this.updateLineWidth,w)),window.removeEventListener("scroll",d()(this.onScroll,D))},mounted:function(){this.onScroll(),this.isMounted=!0,window.innerWidth<1024&&(this.isMobile=!0),this.$eventBus.$on("giftOpen",this.onScrollTo)}},j=P,M=Object(p["a"])(j,k,O,!1,null,null,null);M.options.__file="AppGifts.vue";var T=M.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tasks"},[t._l(t.quests,function(e,s){return n("div",{key:s,staticClass:"task-item",class:{"has-share":e.vk||e.fb}},[e.vk||e.fb?n("div",{key:"social_quest",on:{click:function(e){t.openQuest=!0}}},[n("div",{staticClass:"img"},[n("img",{attrs:{src:e.data.pic}})]),n("span",{staticClass:"head"},[t._v(t._s(e.data.name))]),n("span",{staticClass:"ball"},[t._v("\n                +"+t._s(e.data.points)+" "+t._s(t._f("pluralize")(e.data.points,"балл,балла,баллов"))+"\n            ")])]):!e._actionId||e.vk||e.fb?e._actionId?t._e():n("div",{key:"custom_quest",on:{click:function(n){t.onOpenCustom(e),t.openQuest=!0}}},[n("div",{staticClass:"img"},[n("img",{attrs:{src:e.data.pic}})]),n("span",{staticClass:"head"},[t._v(t._s(e.data.name))]),n("span",{staticClass:"ball"},[t._v("\n                +"+t._s(e.data.points)+" "+t._s(t._f("pluralize")(e.data.points,"балл,балла,баллов"))+"\n            ")])]):n("a",{directives:[{name:"system-action",rawName:"v-system-action",value:e,expression:"quest"}],key:"custom_quest",on:{click:function(e){t.openQuest=!0}}},[n("div",{staticClass:"img"},[n("img",{attrs:{src:e.data.pic}})]),n("span",{staticClass:"head"},[t._v(t._s(e.data.name))]),n("span",{staticClass:"ball"},[t._v("\n                +"+t._s(e.data.points)+" "+t._s(t._f("pluralize")(e.data.points,"балл,балла,баллов"))+"\n            ")])])])}),t.openQuest?n("div",{staticClass:"popup"},[n("div",{staticClass:"popup-inner popup-inner-gift popup-inner-gift-quest"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.openQuest=!1}}}),n("div",{staticClass:"info"},[n("span",{staticClass:"name"},[t._v("Speak at the external event")]),n("span",{staticClass:"desc"},[t._v("Perform a speech, lecture or a workshop on one of the industry recognized events and receive recognition for each of your public talks.")]),n("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v("500 points")])]),t._m(0),n("div",{staticClass:"bottom"},[t._v("\n                To receive the award for successful execution of this action please submit your recognition request to your manager or to hr@placeholder.com.\n            ")])])]):t._e()],2)},A=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"img"},[s("img",{attrs:{src:n("d602")}})])}],U=(n("a481"),n("6d67"),n("8afe")),B=n("a322"),$=(n("0cd8"),n("4f37"),n("cdd4")),x=n.n($),I=n("a1bc"),S={"font-size":"15px","font-weight":"bold",display:"inline-block",color:"#ffffff","line-height":"40px","background-color":"#cd3c3c",padding:"0 30px","text-decoration":"none","font-family":"Arial",cursor:"pointer"},R={fb_share_btn:S,vk_share_btn:S},q=2e3,W=function(t,e){var n="",s="";for(var i in e)if(e.hasOwnProperty(i)){if("@"==i[0]&&i.split("|").length>1){var a=i.split("|")[0].trim(),o=i.split("|")[1].trim();s+=a+"{ "+t+" ."+o+"{ "}else n+=t+" ."+i+"{ ";var r=e[i];for(var c in r)r.hasOwnProperty(c)&&("@"==i[0]?s+=c+":"+r[c]+" !important;":n+=c+":"+r[c]+" !important;");"@"==i[0]?s+=" } }":n+=" }"}return n+=s,n},K={name:"AppQuests",data:function(){return{isMounted:!1,open:null,openQuest:!1}},directives:{systemAction:{bind:function(t,e){var n=e.value;t.setAttribute("data-styles",W("",n.data.styles||R)),t.setAttribute("data-text",n.data.button_text),x.a.actions&&n&&x.a.actions.parse(t,n)}}},watch:{open:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},computed:Object(o["a"])({},Object(r["b"])(["questList","remoteConfig"]),{quests:function(){if(this.isMounted&&this.remoteConfig&&this.questList){var t=this.remoteConfig.quests,e=this.questList.filter(function(t){return t.socialType}),n=e.reduce(function(e,n){var s=e.find(function(t){return t.action===n.action});if(s)s[n.socialType]=n;else{var i,a=(i={_actionId:n._actionId,action:n.action},Object(B["a"])(i,n.socialType,n),Object(B["a"])(i,"data",t.social[n.action]),i);e=Object(U["a"])(e).concat([a])}return e},[]),s=this.questList.filter(function(t){return!t._actionId});n=Object(U["a"])(n).concat(Object(U["a"])(s.map(function(e){return e.data=t.custom[e.type],e})));var i=this.questList.filter(function(t){return!t.socialType&&t._actionId});return n=Object(U["a"])(n).concat(Object(U["a"])(i.map(function(e){return e.data=t.system[e.type],e}))),n}}}),filters:{customIframe:function(t){var e=x.a.config();return I["a"]&&I["a"].domain+e.urls.actions.custom.render.replace(":action_id",t.id)+"?auth_hash="+e.auth_hash+"&lang="+e.lang+"&config="+(I["a"].remote_config_name||"default")||""}},methods:{onOpenSocial:function(t,e){var n=this.questList.find(function(n){return t.action===n.action&&n.socialType===e});n.data=t.data,this.open=Object.assign({},n)},onClosePopup:function(t){this.open=!1,this.open._actionId||this.$store.dispatch("fetchQuests")},onOpenCustom:function(t){this.open=Object.assign({},t)}},mounted:function(){var t=this;this.isMounted=!0,x.a.on("actions.perform.success",function(e){setTimeout(function(){t.open=!1,t.$store.dispatch("fetchQuests")},q)})}},z=K,G=Object(p["a"])(z,L,A,!1,null,null,null);G.options.__file="AppQuests.vue";var H=G.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isInited?n("div",{staticClass:"badges"},[n("div",{staticClass:"left"},[n("div",{staticClass:"left-wrap"},[n("span",{staticClass:"block-head"},[t._v("Бейджи")]),n("span",{staticClass:"block-desc open-sans"},[t._v("\n                Выполняйте задания, совершайте действия на сайте, чтобы получить бейджи. Соберите все и получите дополнительные баллы!\n            ")]),n("div",{staticClass:"badges-main"},t._l(t.badges,function(e,s){return n("div",{key:s,staticClass:"item",class:{act:e.is_received},on:{click:function(n){t.open=e}}},[e.data&&(e.is_received?e.data.icon_active:e.data.icon)?n("img",{attrs:{src:e.is_received?e.data.icon_active:e.data.icon}}):t._e()])}))])]),n("div",{staticClass:"right"},[t.open&&t.open.data?n("div",{staticClass:"badges-select"},[n("div",{staticClass:"img"},[t.open.data.image?n("img",{attrs:{src:t.open.data.image}}):t._e()]),t.open.is_received?n("div",{staticClass:"gal"}):t._e(),n("span",{staticClass:"head"},[t._v(t._s(t.open.name))]),n("span",{staticClass:"desc open-sans"},[t._v(t._s(t.open.data.description))]),n("div",{staticClass:"share"})]):t._e()])]):t._e()},F=[],Y=(n("ac6a"),n("f3e2"),{name:"AppBadges",data:function(){return{open:null}},watch:{isInited:function(){this.badges&&this.badges.length&&!this.open&&(this.open=this.badges[0])}},computed:Object(o["a"])({},Object(r["b"])(["badgeList","isInited"]),{badges:function(){var t=[];return this.badgeList&&(t=Object(U["a"])(this.badgeList.oneLevelBadges),this.badgeList.multilevelBadges.length&&this.badgeList.multilevelBadges.forEach(function(e){t=Object(U["a"])(t).concat(Object(U["a"])(e))})),t}})}),Q=Y,V=Object(p["a"])(Q,N,F,!1,null,null,null);V.options.__file="AppBadges.vue";var J=V.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stock"},[n("div",{staticClass:"wrapper"},[n("span",{staticClass:"block-head"},[t._v("Розыгрыши и акции")]),n("div",{ref:"filters",staticClass:"filters"},[t.isInited?n("div",{staticClass:"act-line",style:t.styles}):t._e(),n("a",{staticClass:"type_active",class:{act:"active"===t.filterBy},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterBy="active"}}},[n("span",{staticClass:"text"},[t._v("Активные")])]),n("a",{staticClass:"type_use",class:{"has-num":t.inUse,act:"use"===t.filterBy},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterBy="use"}}},[n("span",{staticClass:"text"},[t._v("Вы участвуете")]),t.inUse?n("span",{staticClass:"num"},[t._v(t._s(t.inUse))]):t._e()]),n("a",{staticClass:"type_ended",class:{act:"ended"===t.filterBy},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterBy="ended"}}},[n("span",{staticClass:"text"},[t._v("Закончившиеся")])])]),n("div",{staticClass:"stock-main"},[t._l(t.items,function(e,s){return n("div",{key:s,staticClass:"item"},[n("div",{staticClass:"img",on:{click:function(n){t.open=e}}},[n("img",{attrs:{src:e.image}}),"new"===e.type?n("span",{staticClass:"status"},[t._v("Новый розыгрыш")]):t._e(),"use"===e.type?n("span",{staticClass:"status status-y"},[t._v("Вы участвуете")]):t._e(),"winner"===e.type?n("span",{staticClass:"status status-w"},[t._v("Вы победили")]):t._e(),n("div",{staticClass:"hover"},[n("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.open=e}}},[t._v("Подробнее")])])]),n("div",{staticClass:"info"},[e.startDate&&e.endDate?n("span",{staticClass:"date"},[t._v("\n                        С "+t._s(t._f("moment")(e.startDate,"D MMMM"))+" по "+t._s(t._f("moment")(e.endDate,"D MMMM"))+"\n                    ")]):t._e(),n("span",{staticClass:"name"},[t._v(t._s(e.name))]),n("span",{staticClass:"desc"},[t._v(t._s(e.short_description))])])])}),t.items.length<1&&"active"===t.filterBy?n("div",{staticClass:"empty-list-message"},[t._v("\n\n                Нет активных акций\n\n            ")]):t._e(),t.items.length<1&&"use"===t.filterBy?n("div",{staticClass:"empty-list-message"},[t._v("\n\n                Нет акций, в которых вы участвуете\n\n            ")]):t._e(),t.items.length<1&&"ended"===t.filterBy?n("div",{staticClass:"empty-list-message"},[t._v("\n\n                Нет прошедших акций\n\n            ")]):t._e()],2)]),t.open?n("div",{staticClass:"popup"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.open=null}}}),n("div",{staticClass:"popup-inner popup-inner-stock"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.open.image}}),"new"===t.open.type?n("span",{staticClass:"status"},[t._v("Новый розыгрыш")]):t._e(),"use"===t.open.type?n("span",{staticClass:"status status-y"},[t._v("Вы участвуете")]):t._e(),"winner"===t.open.type?n("span",{staticClass:"status status-w"},[t._v("Вы победили")]):t._e()]),n("div",{staticClass:"info"},[t.open.startDate&&t.open.endDate?n("span",{staticClass:"date"},[t._v("\n                    С "+t._s(t._f("moment")(t.open.startDate,"D MMMM"))+" по "+t._s(t._f("moment")(t.open.endDate,"D MMMM"))+"\n                ")]):t._e(),n("span",{staticClass:"name"},[t._v(t._s(t.open.name))]),n("span",{staticClass:"desc",domProps:{innerHTML:t._s(t.open.description)}})]),t.open.hideBtn||"winner"===t.open.type||"use"===t.open.type||"ended"===t.open.type?t._e():n("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onJoin(t.open)}}},[t._v(t._s(t.loading?"Загрузка...":"Принять участие"))]),t.open.hideBtn||"use"!==t.open.type?t._e():n("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onDisconnect(t.open)}}},[t._v(t._s(t.loading?"Загрузка...":"Не участвовать"))])])]):t._e()])},X=[],tt=2e3,et={name:"AppShares",data:function(){return{isMounted:!1,loading:!1,open:null,filterBy:"active"}},watch:{open:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},computed:Object(o["a"])({},Object(r["b"])(["currentTags","remoteConfig","isInited"]),{inUse:function(){var t=this;if(this.remoteConfig&&this.remoteConfig.shares){var e=this.$moment();return this.currentTags&&this.currentTags.length&&this.remoteConfig&&this.remoteConfig.shares.filter(function(n){var s=t.$moment(n.endDate).isBefore(e);return t.$options.filters["tagExist"](n.tag)&&!s}).length}},items:function(){var t=this,e=[];if(this.remoteConfig&&this.remoteConfig.shares){var n=this.$moment();e=this.remoteConfig.shares.filter(function(e){var s=!!e.tag&&t.$options.filters["tagExist"](e.tag),i=t.$moment(e.endDate).isBefore(n);return"use"===t.filterBy?s&&!i:"active"===t.filterBy?!s&&!i:"ended"===t.filterBy?i:void 0}).map(function(e){var s=!!e.tag&&t.$options.filters["tagExist"](e.tag),i=t.$moment(t.$moment().subtract(7,"days")).isBefore(t.$moment(e.startDate)),a=!!e.winnerTag&&t.$options.filters["tagExist"](e.winnerTag),o=t.$moment(e.endDate).isBefore(n);return i&&(e.type="new"),e.type=s?"use":"",a&&(e.type="winner"),o&&(e.type="ended"),e})}return e},styles:function(){if(this.isMounted){var t={width:0,left:0},e=this.$refs["filters"],n=e.getBoundingClientRect(),s=this.filterBy;if("active"===s){var i=e.querySelector(".type_active").getBoundingClientRect();t.width=i.width,t.left=i.left-n.left}else if("use"===s){var a=e.querySelector(".type_use").getBoundingClientRect();t.width=a.width,t.left=a.left-n.left}else if("ended"===s){var o=e.querySelector(".type_ended").getBoundingClientRect();t.width=o.width,t.left=o.left-n.left}return t.width+="px",t.left+="px",t}}}),methods:{onJoin:function(t){var e=this;if(!this.loading){var n={add:[t.tag]},s=function(){e.loading=!1,e.open=!1,e.filterBy="use"};this.loading=!0,this.$store.dispatch("changeTags",n).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(s,s)},tt)})}},onDisconnect:function(t){var e=this;if(!this.loading){var n={remove:[t.tag]},s=function(){e.loading=!1,e.open=!1,e.filterBy="active"};this.loading=!0,this.$store.dispatch("changeTags",n).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(s,s)},tt)})}}},mounted:function(){this.isMounted=!0}},nt=et,st=Object(p["a"])(nt,Z,X,!1,null,null,null);st.options.__file="AppShares.vue";var it=st.exports,at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"popup"},[n("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange(!1)}}}),n("div",{staticClass:"popup-inner"},[n("div",{staticClass:"left"},[n("div",{staticClass:"left-wrap"},[n("div",{staticClass:"popup-menu"},[n("a",{class:{act:"profile"===t.type||"profile-edit"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("profile")}}},[t._v("Личные данные")]),n("a",{class:{act:"channels"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("channels")}}},[t._v("Каналы коммуникации")]),n("a",{class:{act:"favorites"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("favorites")}}},[t._v("Избранное")]),n("a",{class:{act:"history"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("history")}}},[t._v("История")])]),t.remoteConfig&&t.remoteConfig.logoutLink?n("a",{staticClass:"exit-btn",attrs:{href:t.remoteConfig.logoutLink}},[t._v("Выйти")]):t._e()]),n("div",{staticClass:"banner"},[n("a",{attrs:{href:t.remoteConfig.bannerLink||"#"}},[n("img",{attrs:{src:t.remoteConfig.bannerImage}})])])]),"profile"===t.type||"profile-edit"===t.type?n("app-popup-profile",{attrs:{type:t.type},on:{onChange:function(e){t.type=e}}}):t._e(),"channels"===t.type?n("app-popup-channels"):t._e(),"favorites"===t.type?n("app-popup-favorites"):t._e(),"history"===t.type?n("app-popup-history"):t._e()],1)]):t._e()},ot=[],rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right"},[n("span",{staticClass:"popup-head"},[t._v("Личные данные")]),n("span",{staticClass:"popup-desc"},[t._v("\n        Мы ценим вас и благодарим за то, что вы с нами. Поэтому с каждой покупки.\n    ")]),t.currentUser&&t.fields?n("div",{staticClass:"lk-form"},[t._l(t.fields,function(e,s){return n("div",{key:s,staticClass:"lk-row"},[n("label",[t._v(t._s(e.name))]),e.model&&"profile"===t.type?n("span",{staticClass:"input-value"},[t._v("\n                "+t._s(t.getFieldValue(e))+"\n            ")]):!e.model&&e.points&&"profile"===t.type?n("span",{staticClass:"ball-plus"},[t._v("\n                +"+t._s(e.points)+" баллов\n            ")]):t._e(),"profile-edit"!==t.type||e.input?t._e():n("div",{staticClass:"input-block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"field.model"}],attrs:{type:"text"},domProps:{value:e.model},on:{input:function(n){n.target.composing||t.$set(e,"model",n.target.value)}}})]),"profile-edit"===t.type&&"phone"===e.input?n("div",{staticClass:"input-block phone"},[n("masked-input",{attrs:{mask:t.phoneMask,guide:!0,type:"text"},model:{value:e.model,callback:function(n){t.$set(e,"model",n)},expression:"field.model"}})],1):t._e(),"profile-edit"===t.type&&"date"===e.input?n("div",{staticClass:"input-block calendar"},[n("datepicker",{attrs:{language:t.datepickerLocale,format:t.dateFormatter},model:{value:e.model,callback:function(n){t.$set(e,"model",n)},expression:"field.model"}})],1):t._e(),"profile-edit"===t.type&&"radio"===e.input?n("div",{staticClass:"radio"},t._l(e.options,function(s,i){return n("div",{key:i,staticClass:"radio-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"field.model"}],attrs:{type:"radio",id:e.setField+s.value,name:e.setField},domProps:{value:s.value,checked:t._q(e.model,s.value)},on:{change:function(n){t.$set(e,"model",s.value)}}}),n("label",{attrs:{for:e.setField+s.value}},[t._v(t._s(s.name))])])})):t._e(),"profile-edit"===t.type&&"select"===e.input?n("div",{staticClass:"select",class:{act:~t.activeDropdowns.indexOf(e.id)}},[n("input",{attrs:{type:"hidden"}}),n("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeDropdown(e),expression:"closeDropdown(field)"}],on:{click:function(n){t.toggleDropdown(e)}}},[t._v(t._s(e.model?e.model.name:e.empty||"Не выбрано"))]),n("div",{staticClass:"select-popup"},t._l(e.options,function(s,i){return n("a",{key:i,attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.model=s}}},[t._v(t._s(s.name))])}))]):t._e()])}),t.error?n("div",{staticClass:"lk-row error"},[t._v("\n          "+t._s(t.error)+"\n        ")]):t._e(),"profile"===t.type?n("div",{key:"profile_buttons",staticClass:"lk-row"},[n("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("profile-edit")}}},[t._v("Редактировать")])]):"profile-edit"===t.type?n("div",{key:"profile_buttons",staticClass:"lk-row"},[n("a",{staticClass:"red-btn edit",class:{disabled:t.saving},attrs:{href:"#",disabled:t.saving},on:{click:function(e){return e.preventDefault(),t.onSave(e)}}},[t._v("Сохранить")]),n("a",{staticClass:"red-btn cancel",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("profile")}}},[t._v("Отмена")])]):t._e()],2):t._e()])},ct=[],lt=(n("5df3"),n("456d"),n("57e7"),n("fa33")),ut=n("2430"),dt=n("4396"),ft=n.n(dt),_t=3e3,pt=3e3,mt=["+",/\d/," ","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,"-",/\d/,/\d/],ht={name:"AppPopupProfile",components:{Datepicker:lt["a"]},props:{type:String,default:"profile"},data:function(){return{datepickerLocale:ut["a"],activeDropdowns:[],phoneMask:mt,error:"",saving:!1}},filters:{gender:function(t){return 1===t?"Мужской":2===t&&"Женский"}},computed:Object(o["a"])({},Object(r["b"])(["currentUser","remoteConfig"]),{fields:function(){var t=this;return(this.remoteConfig&&this.remoteConfig.profile||[]).map(function(e){t.currentUser[e.getField];if("tag"===e.type){if("select"===e.input){var n=e.options.find(function(e){return t.$options.filters["tagExist"](e.value)});e.origin=n?Object.assign({},n):null,e.model=n?Object.assign({},n):null}}else if("system"===e.type||"redirect"===e.type){var s=t.currentUser[e.getField];if(s&&"phone"===e.input){var i=Object(dt["conformToMask"])(s,t.phoneMask,{guide:!1});i&&i.conformedValue&&(s=i.conformedValue)}e.origin=s,e.model=s}return e})}}),methods:{openDropdown:function(t){var e=this.activeDropdowns.indexOf(t.id);~e||this.activeDropdowns.push(t.id)},closeDropdown:function(t){var e=this;return function(){var n=e.activeDropdowns.indexOf(t.id);~n&&e.activeDropdowns.splice(n,1)}},toggleDropdown:function(t){var e=this.activeDropdowns.indexOf(t.id);~e?this.activeDropdowns.splice(e,1):this.activeDropdowns.push(t.id)},dateFormatter:function(t){return this.$moment(t).format("D MMMM YYYY")},getFieldValue:function(t){var e=t.model;return"tag"===t.type?"select"===t.input&&(e=t.origin&&t.origin.name):"system"!==t.type&&"redirect"!==t.type||t.filter&&(e=this.$options.filters[t.filter](e,t.filter_params)),e},onChange:function(t){this.$emit("onChange",t)},onUserUpdate:function(t){var e=this;return new Promise(function(n,s){if(t&&!t.length)return n();var i={};if(t.forEach(function(t){"date"===t.input?i[t.setField]=t.model?e.$moment(t.model).format("YYYY-MM-DD"):"":i[t.setField]=t.model}),!Object.keys(i).length)return n();e.$store.dispatch("userUpdate",i).then(n,s)})},onTagsUpdate:function(t){var e=this;return new Promise(function(n,s){var i={add:t.filter(function(t){var e=!t.origin||t.model.value!==t.origin.value;return t.model&&t.model.value&&e}).map(function(t){return t.model.value}),remove:t.filter(function(t){var e=!!t.origin&&t.model.value!==t.origin.value;return t.model&&t.model.value&&e}).map(function(t){return t.origin.value})};if(!i.add.length&&!i.remove.length)return n();e.$store.dispatch("changeTags",i).then(n,s)})},checkFirstUpdate:function(t){var e=this;return new Promise(function(n,s){if(t&&!t.length)return n();var i={add:[]};if(console.log(i),t.forEach(function(t){e.$options.filters["tagExist"](t.tag)||i.add.push(t.tag)}),!i.add.length)return n();e.$store.dispatch("changeTags",i).then(n,s)})},checkRedirect:function(t){if(t.length>0){var e="".concat(I["a"].profile_redirect_url,"?").concat(t.map(function(t){return"".concat(t.name,"=").concat(encodeURIComponent(t.value))}).join("&"));window.location.href=e}},onSave:function(){var t=this;this.saving=!0;var e=this.fields.filter(function(t){return"redirect"===t.type&&t.model!==t.origin}).map(function(t){return{name:t.setField,value:t.model,tag:t.tag}}),n=this.fields.filter(function(t){return"system"===t.type&&t.model!==t.origin}),s=this.fields.filter(function(t){return"tag"===t.type&&t.model}),i=s.concat(n).concat(e).filter(function(t){return t.tag});console.log(this.fields);var a=[this.checkFirstUpdate(i),this.onUserUpdate(n),this.onTagsUpdate(s)];Promise.all(a).then(function(){setTimeout(function(){console.log("saving done"),t.error="",n.length?t.$store.dispatch("fetchUser").then(function(){s.length?t.$store.dispatch("fetchTags").then(function(){t.saving=!1,t.checkRedirect(e),t.onChange("profile")}):(t.checkRedirect(e),t.saving=!1,t.onChange("profile"))}):s.length?t.$store.dispatch("fetchTags").then(function(){t.checkRedirect(e),t.saving=!1,t.onChange("profile")}):(t.checkRedirect(e),t.saving=!1)},pt)},function(e){if(e&&"error"===e.status){var n=t.remoteConfig&&t.remoteConfig.profileError||{};t.error=n[e.status_code]||e.message}else t.error="Неизвестная ошибка";t.saving=!1,setTimeout(function(){t.error&&(t.error=!1)},_t)})}}},vt=ht,gt=Object(p["a"])(vt,rt,ct,!1,null,null,null);gt.options.__file="AppPopupProfile.vue";var bt=gt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right"},[n("span",{staticClass:"popup-head"},[t._v("Каналы коммуникации")]),n("span",{staticClass:"popup-desc"},[t._v("\n        Мы ценим вас и благодарим за то, что вы с нами. Поэтому с каждой покупки.\n    ")]),n("div",{staticClass:"lk-form"},[t._l(t.items,function(e,s){return n("div",{key:s,staticClass:"lk-row"},[n("div",{staticClass:"check-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"item.model"}],attrs:{type:"checkbox",name:"channel_"+s,id:"channel_"+s},domProps:{checked:Array.isArray(e.model)?t._i(e.model,null)>-1:e.model},on:{change:function(n){var s=e.model,i=n.target,a=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(e,"model",s.concat([o])):r>-1&&t.$set(e,"model",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"model",a)}}}),n("label",{attrs:{for:"channel_"+s}},[t._v(t._s(e.name))])])])}),n("div",{staticClass:"lk-row"},[n("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onChange(e)}}},[t._v("Сохранить")])]),t.saved?n("div",{staticClass:"lk-from-success"},[t._v("Все изменения сохранены")]):t._e()],2)])},yt=[],Et=(n("2caf"),2e3),kt=1e3,Ot={name:"AppPopupChannels",data:function(){return{saved:!1,timeout:null}},computed:Object(o["a"])({},Object(r["b"])(["currentUser","remoteConfig"]),{items:function(){var t=this;return(this.remoteConfig&&this.remoteConfig.channels||[]).map(function(e){if("system"===e.type){var n=!!t.currentUser[e.getValue];e.origin=n,e.model=n}else if("tag"===e.type){var s=t.$options.filters["tagExist"](e.value);e.origin=s,e.model=s}return e})}}),methods:{onUserUpdate:function(t){var e=this;return new Promise(function(n,s){var i={};for(var a in t.forEach(function(t){Array.isArray(t.setValue)?(i[t.setValue[0]]=i[t.setValue[0]]||{},i[t.setValue[0]][t.setValue[1]]=t.model?1:0):i[t.setValue]=t.model}),i)i.hasOwnProperty(a)&&(i[a]=JSON.stringify(i[a]));if(!Object.keys(i).length)return n();e.$store.dispatch("userUpdate",i).then(n,s)})},onTagsUpdate:function(t){var e=this;return new Promise(function(n,s){var i={add:t.filter(function(t){return t.model&&t.model!==t.origin}).map(function(t){return t.value}),remove:t.filter(function(t){return!t.model&&t.model!==t.origin}).map(function(t){return t.value})};if(!i.add.length&&!i.remove.length)return n();e.$store.dispatch("changeTags",i).then(n,s)})},onChange:function(t){var e=this;this.timeout&&clearTimeout(this.timeout);var n=this.items.filter(function(t){return"system"===t.type&&t.model!==t.origin}),s=this.items.filter(function(t){return"tag"===t.type&&t.model!==t.origin}),i=[this.onUserUpdate(n),this.onTagsUpdate(s)];Promise.all(i).then(function(){n.length?(e.saved=!0,e.timeout=setTimeout(function(){e.saved=!1},Et),e.$store.dispatch("fetchUser",!0).then(function(t){s.length?setTimeout(function(){e.$store.dispatch("fetchTags",!0).then(function(n){e.$store.commit("updateUserInfo",t),e.$store.commit("updateTags",n.tags)})},kt):e.$store.commit("updateUserInfo",t)})):s.length?(e.saved=!0,e.timeout=setTimeout(function(){e.saved=!1},Et),setTimeout(function(){e.$store.dispatch("fetchTags")},kt)):e.saved=!1},function(){e.saved=!1})}}},Dt=Ot,wt=Object(p["a"])(Dt,Ct,yt,!1,null,null,null);wt.options.__file="AppPopupChannels.vue";var Pt=wt.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right"},[t._m(0),t.edit?"store"===t.edit?n("div",{key:"store_editor"},[n("span",{staticClass:"popup-head"},[t._v("Выберите магазины")]),n("div",{staticClass:"lk-form"},[n("div",{staticClass:"lk-row"},[n("div",{staticClass:"input-block search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStoreString,expression:"searchStoreString"}],attrs:{type:"text",placeholder:"Поиск по названию"},domProps:{value:t.searchStoreString},on:{input:function(e){e.target.composing||(t.searchStoreString=e.target.value)}}})])]),n("div",{staticClass:"lk-form-shop-wrap"},[n("div",{staticClass:"lk-form-shop"},t._l(t.filteredStores,function(e,s){return n("div",{key:s,staticClass:"lk-row",attrs:{title:e.place}},[n("div",{staticClass:"check-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"store.model"}],attrs:{type:"checkbox",name:"store_"+s,id:"store_"+s},domProps:{checked:Array.isArray(e.model)?t._i(e.model,null)>-1:e.model},on:{change:function(n){var s=e.model,i=n.target,a=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(e,"model",s.concat([o])):r>-1&&t.$set(e,"model",s.slice(0,r).concat(s.slice(r+1)))}else t.$set(e,"model",a)}}}),n("label",{attrs:{for:"store_"+s}},[t._v(t._s(e.name))])])])}))]),n("div",{staticClass:"lk-row mt30"},[n("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onSaveStores(e)}}},[t._v("Сохранить")]),n("a",{staticClass:"red-btn cancel",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit=!1}}},[t._v("Отмена")])])])]):"category"===t.edit?n("div",{key:"store_editor"},[n("span",{staticClass:"popup-head"},[t._v("Выберите категории")]),n("div",{staticClass:"category category-select"},t._l(t.categories,function(e,s){return n("a",{key:s,class:{act:e.model},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.model=!e.model}}},[t._v(t._s(e.name))])})),n("div",{staticClass:"lk-form"},[n("div",{staticClass:"lk-row mt30"},[n("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onSaveCategories(e)}}},[t._v("Сохранить")]),n("a",{staticClass:"red-btn cancel",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit=!1}}},[t._v("Отмена")])])])]):t._e():n("div",{key:"store_editor"},[n("span",{staticClass:"popup-head mt30"},[t._v("Магазины")]),n("div",{staticClass:"shop"},t._l(t.currentUserStores,function(e){return n("div",{key:e.name,staticClass:"item",class:{hover:t.hoveredStore&&t.hoveredStore.name===e.name},on:{click:function(n){t.hoveredStore=e},mouseover:function(n){t.hoveredStore=e},mouseleave:function(e){t.hoveredStore=null}}},[n("span",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n        ")]),n("span",{staticClass:"num"},[t._v("\n            "+t._s(e.count)+" "+t._s(t._f("pluralize")(e.count,"магазин,магазина,магазинов"))+"\n        ")]),n("img",{attrs:{src:e.logo}}),n("span",{staticClass:"red-btn dell",on:{click:function(n){n.preventDefault(),t.onDeleteStore(e)}}},[t._v("Удалить")])])})),n("a",{staticClass:"btn-add",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit="store"}}},[t._v("Добавить магазин")]),n("span",{staticClass:"popup-head"},[t._v("Категории")]),t.currentUserCategories.length?n("div",{staticClass:"category"},t._l(t.currentUserCategories,function(e,s){return n("a",{key:s,class:{hover:t.hoveredStore===e},attrs:{href:"#"},on:{click:function(n){n.preventDefault(),t.hoveredStore=e},mouseover:function(n){t.hoveredStore=e},mouseleave:function(e){t.hoveredStore=null}}},[t._v("\n        "+t._s(e)+"\n        "),n("span",{on:{click:function(n){t.onDeleteCategory(e)}}},[t._v("Удалить")])])})):t._e(),n("a",{staticClass:"btn-add",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit="category"}}},[t._v("Добавить категорию")])])])},Mt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("span",{staticClass:"popup-head"},[t._v("Избранное")]),n("span",{staticClass:"popup-desc"},[t._v("\n\n      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n    ")])])}],Tt=1e3,Lt={name:"AppPopupFavorites",data:function(){return{holding:!1,edit:!1,stores:null,searchStoreString:"",hoveredStore:null,categories:null}},watch:{edit:function(){var t=this;this.searchStoreString="",this.stores=this.storeList.map(function(e){var n=t.$options.filters["tagExist"](e.name);return e.origin=n,e.model=n,e}),this.categories=this.storeCategories.map(function(e){var n=t.$options.filters["tagExist"](e);return{name:e,origin:n,model:n}})}},computed:Object(o["a"])({},Object(r["b"])(["storeList","storeCategories","currentUserCategories","currentUserStores","currentUser","remoteConfig"]),{filteredStores:function(){var t=this;return this.stores.filter(function(e){return!t.searchStoreString.length||0===e.name.toLowerCase().indexOf(t.searchStoreString.toLowerCase())})}}),methods:{onSaveStores:function(){var t=this;if(!this.holding){var e={add:this.stores.filter(function(t){return t.model&&t.model!==t.origin}).map(function(t){return t.name}),remove:this.stores.filter(function(t){return!t.model&&t.model!==t.origin}).map(function(t){return t.name})};this.holding=!0,this.$store.dispatch("changeTags",e).then(function(){t.completeFavorites(),setTimeout(function(){t.$store.dispatch("fetchTags").then(function(){t.edit=!1,t.holding=!1})},Tt)})}},onDeleteStore:function(t){var e=this;this.holding||(this.holding=!0,this.$store.dispatch("changeTags",{remove:[t.name]}).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(function(){e.holding=!1})},Tt)}))},onSaveCategories:function(){var t=this;if(!this.holding){var e={add:this.categories.filter(function(t){return t.model&&t.model!==t.origin}).map(function(t){return t.name}),remove:this.categories.filter(function(t){return!t.model&&t.model!==t.origin}).map(function(t){return t.name})};this.holding=!0,this.$store.dispatch("changeTags",e).then(function(){t.completeFavorites(),setTimeout(function(){t.$store.dispatch("fetchTags").then(function(){t.edit=!1,t.holding=!1})},Tt)})}},onDeleteCategory:function(t){var e=this;this.holding||(this.holding=!0,this.$store.dispatch("changeTags",{remove:[t]}).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(function(){e.holding=!1})},Tt)}))},completeFavorites:function(){this.stores.length>2&&this.categories.length>1&&(console.log(this.remoteConfig.favoriteTag),this.remoteConfig.favoriteTag&&this.$store.dispatch("changeTags",{add:[this.remoteConfig.favoriteTag]}))}}},At=Lt,Ut=Object(p["a"])(At,jt,Mt,!1,null,null,null);Ut.options.__file="AppPopupFavorites.vue";var Bt=Ut.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right"},[n("span",{staticClass:"popup-head"},[t._v("\n        История\n    ")]),t.currentHistory&&!t.currentHistory.length?n("span",{staticClass:"popup-desc"},[t._v("\n        Тут будет история ваших действий\n    ")]):t._e(),t.currentHistory&&t.currentHistory.length?n("div",{staticClass:"history"},[n("table",[t._m(0),t._l(t.currentHistory,function(e,s){return n("tr",{key:s},[n("td",[t._v(t._s(t._f("moment")(e.action_date,"DD MMM")))]),n("td",[n("span",{staticClass:"name"},[t._v(t._s(t.historyName(e)))]),t.historyName(e)!==e.name?n("span",{staticClass:"dop"},[t._v(t._s(e.name))]):t._e()]),n("td",[n("span",{staticClass:"ball"},[t._v(t._s(e.points_delta>0?"+"+e.points_delta:e.points_delta))])])])})],2)]):t._e()])},xt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("Дата")]),n("th",[t._v("Событие")]),n("th",[t._v("Баллы")])])}],It={purchase:"Покупка",gift_purchase:"Подарок",badge:"Бейджик",registration:"Регистрация",referral:"Регистрация друга",referred:"Регистрация по приглашению",referred_purchase:"Покупка приглашенного пользователя",promocode:"За ввод промокода",enter_group:"Вступление в группу ",share_purchase:"Рассказ о покупке в ",social_share:"Рассказ в ",share_badge:"Рассказ о бейджике в ",earn_badge:"Получен бейджик "},St={name:"AppPopupHistory",computed:Object(o["a"])({},Object(r["b"])(["currentHistory","remoteConfig"])),methods:{historyName:function(t){if(!t)return"";var e=this.remoteConfig&&this.remoteConfig.historyItems||It;switch(t.action){case"custom_action":return t.name||"";case"event":return t.name||"";case"extra":return t.name||"";case"sharing":switch(t.social_action){case"like":return e.enter_group+t.social_type;case"purchase":return e.share_purchase+t.social_type;case"partner_page":return e.social_share+t.social_type;case"badge":return e.share_badge+t.social_type}}return e[t.action]||""}}},Rt=St,qt=Object(p["a"])(Rt,$t,xt,!1,null,null,null);qt.options.__file="AppPopupHistory.vue";var Wt=qt.exports,Kt={name:"AppPopup",components:{AppPopupProfile:bt,AppPopupChannels:Pt,AppPopupFavorites:Bt,AppPopupHistory:Wt},data:function(){return{show:!1,type:null}},watch:{show:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},computed:Object(o["a"])({},Object(r["b"])(["remoteConfig"]),{bannerStyles:function(){return this.remoteConfig&&this.remoteConfig.bannerImage?{"background-image":"url("+this.remoteConfig.bannerImage+")"}:{}}}),methods:{onChange:function(t){this.show=!!t,this.type=t}},beforeMount:function(){this.$eventBus.$on("popup",this.onChange)},beforeDestroy:function(){this.$eventBus.$off("popup",this.onChange)}},zt=Kt,Gt=Object(p["a"])(zt,at,ot,!1,null,null,null);Gt.options.__file="AppPopup.vue";var Ht=Gt.exports,Nt={data:function(){return{isMounted:!1}},props:{loading:Boolean,default:!1},components:{AppHeader:h,AppMain:E,AppGifts:T,AppQuests:H,AppBadges:J,AppShares:it,AppPopup:Ht},computed:Object(o["a"])({},Object(r["b"])(["remoteConfig","isInited"]),{menu:function(){if(this.isMounted)return[{alias:"profile",name:"Profile",ref:this.$refs["profile"]},{alias:"actions",name:"Actions for points",ref:this.$refs["actions"]},{alias:"gifts",name:"Rewards",ref:this.$refs["gifts"]}]}}),methods:{onMenuClick:function(t){if(t.ref){var e=t.ref.$el&&t.ref.$el.getBoundingClientRect(),n=this.$refs["header"].$el.querySelector(".header").clientHeight,s=e.top+window.pageYOffset-n;0!==s&&window.scrollTo(e.left,s)}}},mounted:function(){this.isMounted=!0}},Ft=Nt,Yt=(n("5c0b"),Object(p["a"])(Ft,i,a,!1,null,null,null));Yt.options.__file="App.vue";var Qt=Yt.exports,Vt=n("f027"),Jt=n("a78e"),Zt=n.n(Jt);s["a"].use(r["a"]);var Xt="auth_hash_cookie",te=new r["a"].Store({state:{inited:!1,user:null,history:null,stores:null,tags:null,gifts:null,config:null,badges:null,quests:null},getters:{isInited:function(t){return t.inited},currentUser:function(t){return t.user&&t.user.user},currentPoints:function(t){return t.user&&t.user.user_points&&t.user.user_points.confirmed},currentHistory:function(t){return t.history},currentTags:function(t){return t.tags},storeList:function(t){return t.stores&&t.stores.list},storeCategories:function(t){return t.stores&&t.stores.categories},currentUserStores:function(t,e){return e.storeList&&e.currentTags&&e.storeList.filter(function(t){return~e.currentTags.map(function(t){return t.tag}).indexOf(t.name)})},currentUserCategories:function(t,e){return e.storeCategories&&e.currentTags&&e.storeCategories.filter(function(t){return~e.currentTags.map(function(t){return t.tag}).indexOf(t)})},remoteConfig:function(t){return t.config},giftList:function(t){return t.gifts},nextGifts:function(t,e){return e.currentUser&&e.giftList&&e.giftList.sort(function(t,e){return parseInt(t.points)-parseInt(e.points)}).filter(function(t){return t.points>e.currentPoints})},nextGift:function(t,e){return e.nextGifts&&e.nextGifts[0]},badgeList:function(t){return t.badges},questList:function(t){return t.quests}},mutations:{ready:function(t){t.inited=!0},updateUserInfo:function(t,e){t.user=e},updateHistory:function(t,e){t.history=e},updateTags:function(t,e){t.tags=e},updateStores:function(t,e){t.stores=e},updateGifts:function(t,e){t.gifts=e},updateConfig:function(t,e){t.config=e},updateBadges:function(t,e){t.badges=e},updateQuests:function(t,e){t.quests=e}},actions:{init:function(){return Vt["a"].init()},fetchUser:function(t,e){var n=t.commit;return new Promise(function(t,s){Vt["a"].userInfo().then(function(s){e||n("updateUserInfo",s),t(s)},s)})},fetchHistory:function(t){var e=t.commit;return new Promise(function(t,n){Vt["a"].userHistory().then(function(n){e("updateHistory",n),t(n)},n)})},fetchStores:function(t){var e=t.commit;return new Promise(function(t,n){fetch(I["a"].stores_url||"stores.json").then(function(t){return t.json()},n).then(function(n){e("updateStores",n),t(n)},n)})},fetchTags:function(t,e){var n=t.commit;return new Promise(function(t,s){Vt["a"].userTags().then(function(s){e||n("updateTags",s.tags),t(s)},s)})},fetchGifts:function(t){var e=t.commit;return new Promise(function(t,n){Vt["a"].giftsList().then(function(n){if(n&&n.length){var s=n.map(function(t){try{t.data=JSON.parse(t.descr)}catch(t){}return t});e("updateGifts",s)}t(n)},n)})},fetchConfig:function(t){var e=t.commit;return new Promise(function(t,n){Vt["a"].config().then(function(n){e("updateConfig",n.config.config),t(n)},n)})},fetchQuests:function(t){var e=t.commit;return new Promise(function(t,n){Promise.all([Vt["a"].loadActions(),Vt["a"].loadCustomActions()]).then(function(n){var s=n.find(function(t){return!Array.isArray(t)}).actions,i=n.find(function(t){return Array.isArray(t)}),a=Object(U["a"])(s).concat(Object(U["a"])(i));e("updateQuests",a),t(a)},n)})},userUpdate:function(t,e){t.commit;return Vt["a"].userUpdate(e)},changeAvatar:function(t,e){t.commit;return Vt["a"].changeAvatar(e)},changeTags:function(t,e){t.commit;return new Promise(function(t,n){e.remove&&e.remove.length?Vt["a"].removeTags(e.remove).then(function(){e.add&&e.add.length?Vt["a"].addTags(e.add).then(t,n):t()},n):e.add&&e.add.length?Vt["a"].addTags(e.add).then(t,n):t()})},fetchBadges:function(t){var e=t.commit;return new Promise(function(t,n){Vt["a"].badgesList().then(function(n){if(n){var s=n.one_level_badges.map(function(t){try{t.data=JSON.parse(t.descr)}catch(t){}return t}),i=n.multilevel_badges.map(function(t){return t.map(function(t){try{t.data=JSON.parse(t.descr)}catch(t){}return t})});e("updateBadges",{oneLevelBadges:s,multilevelBadges:i})}t(n)})})},getGift:function(t,e){t.commit;return Vt["a"].getGift(e)},checkLogin:function(t){var e=t.commit,n=t.dispatch;return new Promise(function(t,s){var i=Zt.a.get(I["a"].auth_cookie_name||Xt);i?Vt["a"].login(i).then(function(i){var a=n("fetchUser"),o=n("fetchHistory"),r=n("fetchStores"),c=n("fetchTags"),l=n("fetchGifts"),u=n("fetchConfig"),d=n("fetchBadges"),f=n("fetchQuests"),_=[a,o,r,c,l,u,d,f];return Promise.all(_).then(t,s).then(function(){e("ready")})},s):s(i)})}}}),ee=n("c1df"),ne=n.n(ee);n("957c"),n("2e94"),n("a066"),n("2fb4");s["a"].component("masked-input",ft.a),s["a"].use(n("2ead"),{moment:ne.a}),s["a"].config.productionTip=!1,s["a"].prototype.$eventBus=new s["a"],s["a"].filter("tagExist",function(t){var e=te.getters.currentTags||[];return!!e.find(function(e){return e.tag===t})}),s["a"].filter("pluralize",function(t,e){var n=[2,0,1,1,1,2];return e=e.split(","),e[t%100>4&&t%100<20?2:n[t%10<5?t%10:5]]}),s["a"].directive("click-outside",{bind:function(t,e,n){if("function"!==typeof e.value){var s=n.context.name,i="[Vue-click-outside:] provided expression '".concat(e.expression,"' is not a function, but has to be");s&&(i+="Found in component '".concat(s,"'")),console.warn(i)}var a=e.modifiers.bubble,o=function(n){(a||!t.contains(n.target)&&t!==n.target)&&e.value(n)};t.__vueClickOutside__=o,document.addEventListener("click",o)},unbind:function(t,e){document.removeEventListener("click",t.__vueClickOutside__),t.__vueClickOutside__=null}}),new s["a"]({render:function(t){return t(Qt)},store:te,mounted:function(){s["a"].moment().locale("ru"),te.dispatch("init").then(function(){te.dispatch("checkLogin")})}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("2856"),i=n.n(s);i.a},a066:function(t,e,n){},a1bc:function(t,e,n){"use strict";n("cadf"),n("551c"),n("097d");e["a"]={partner_id:1845,domain:"https://sailplay.ru",lang:"ru",profile_redirect_url:"http://example.com",remote_config_name:"dev_1"}},d602:function(t,e,n){t.exports=n.p+"img/quest1.c8122d00.png"},f027:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ac6a"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5df3"),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6d67"),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("cadf"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("551c"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("097d"),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_5__),sailplay_hub__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("cdd4"),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(sailplay_hub__WEBPACK_IMPORTED_MODULE_6__),sailplay_hub_actions__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("7d77"),sailplay_hub_actions__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(sailplay_hub_actions__WEBPACK_IMPORTED_MODULE_7__),_config__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("a1bc"),TAGS_CHUNK_SIZE=10;__webpack_exports__["a"]={_chunk:function(t,e){return[].concat.apply([],t.map(function(n,s){return s%e?[]:[t.slice(s,s+e)]}))},init:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("init.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("init.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("init",{partner_id:_config__WEBPACK_IMPORTED_MODULE_8__["a"].partner_id,domain:_config__WEBPACK_IMPORTED_MODULE_8__["a"].domain,lang:_config__WEBPACK_IMPORTED_MODULE_8__["a"].lang})})},login:function(t){return new Promise(function(e,n){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("login.success",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("login.error",n),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("login",t)})},config:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("magic.config.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("magic.config.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("magic.config",_config__WEBPACK_IMPORTED_MODULE_8__["a"].remote_config_name)})},userInfo:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("load.user.info",{all:1,purchases:1},function(n){"ok"===n.status?t(n):e(n)})})},addTags:function(t){var e=this._chunk(t,TAGS_CHUNK_SIZE),n=e.map(function(t){return new Promise(function(e,n){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("tags.add",{tags:t},function(t){"ok"===t.status?e(t):n(t)})})});return Promise.all(n)},giftsList:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.gifts.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.gifts.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("load.gifts.list")})},getGift:function(t){return new Promise(function(e,n){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("gifts.purchase.success",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("gifts.purchase.error",n),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("gifts.purchase",{gift:t})})},badgesList:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.badges.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.badges.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("load.badges.list")})},removeTags:function(t){var e=this._chunk(t,TAGS_CHUNK_SIZE),n=e.map(function(t){return new Promise(function(e,n){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("tags.delete",{tags:t},function(t){"ok"===t.status?e(t):n(t)})})});return Promise.all(n)},loadActions:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.actions.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.actions.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("load.actions.list")})},loadCustomActions:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.actions.custom.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.actions.custom.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("load.actions.custom.list")})},userTags:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("tags.list",{},function(n){"ok"===n.status?t(n):e(n)})})},userHistory:function(){return new Promise(function(t,e){var n=(new Date).getTimezoneOffset(),s=Math.abs(n),i=(n<0?"+":"-")+("00"+Math.floor(s/60)).slice(-2)+":"+("00"+s%60).slice(-2);sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.user.history.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.on("load.user.history.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("load.user.history",{tz:i})})},userUpdate:function(t){return new Promise(function(e,n){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.send("users.update",t,function(t){"ok"===t.status?e(t):n(t)})})},changeAvatar:function changeAvatar(image){return new Promise(function(resolve,reject){if(!image)return resolve();var callbackName="sailplay_change_avatar_callback",data=new FormData;data.append("avatar",image);var url=sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.config().DOMAIN+sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.config().urls.users.update;url+="?auth_hash="+sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.config().auth_hash,url+="&callback="+callbackName,window[callbackName]=resolve;var request=new XMLHttpRequest;request.overrideMimeType("application/json"),request.open("POST",url,!0),request.onload=function(){request.responseText&&eval(request.responseText)},request.send(data)})},clearAuthHash:function(){sailplay_hub__WEBPACK_IMPORTED_MODULE_6___default.a.config().auth_hash=""}}}});
//# sourceMappingURL=app.6f6214e4.js.map