(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],f=0,d=[];f<o.length;f++)r=o[f],i[r]&&d.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},i={1:0},a=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/enka/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;a.push([3,0]),s()})({3:function(t,e,s){t.exports=s("Vtdi")},"8CdC":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("rGqo"),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("yt8O"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("XfO3"),core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("bWfx"),core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_array_map__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("VRzm"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_4__),sailplay_hub__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("zdTi"),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(sailplay_hub__WEBPACK_IMPORTED_MODULE_5__),sailplay_hub_actions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("fXdr"),sailplay_hub_actions__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(sailplay_hub_actions__WEBPACK_IMPORTED_MODULE_6__),_config__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("obyI"),TAGS_CHUNK_SIZE=10;__webpack_exports__["a"]={_chunk:function(t,e){return[].concat.apply([],t.map(function(s,n){return n%e?[]:[t.slice(n,n+e)]}))},init:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("init.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("init.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("init",{partner_id:_config__WEBPACK_IMPORTED_MODULE_7__["a"].partner_id,domain:_config__WEBPACK_IMPORTED_MODULE_7__["a"].domain,lang:_config__WEBPACK_IMPORTED_MODULE_7__["a"].lang})})},login:function(t){return new Promise(function(e,s){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("login.success",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("login.error",s),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("login",t)})},config:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("magic.config.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("magic.config.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("magic.config",_config__WEBPACK_IMPORTED_MODULE_7__["a"].remote_config_name)})},userInfo:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("load.user.info",{all:1,purchases:1},function(s){"ok"===s.status?t(s):e(s)})})},addTags:function(t){var e=this._chunk(t,TAGS_CHUNK_SIZE),s=e.map(function(t){return new Promise(function(e,s){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("tags.add",{tags:t},function(t){"ok"===t.status?e(t):s(t)})})});return Promise.all(s)},giftsList:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.gifts.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.gifts.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("load.gifts.list")})},getGift:function(t){return new Promise(function(e,s){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("gifts.purchase.success",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("gifts.purchase.error",s),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("gifts.purchase",{gift:t})})},badgesList:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.badges.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.badges.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("load.badges.list")})},removeTags:function(t){var e=this._chunk(t,TAGS_CHUNK_SIZE),s=e.map(function(t){return new Promise(function(e,s){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("tags.delete",{tags:t},function(t){"ok"===t.status?e(t):s(t)})})});return Promise.all(s)},loadActions:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.actions.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.actions.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("load.actions.list")})},loadCustomActions:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.actions.custom.list.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.actions.custom.list.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("load.actions.custom.list")})},userTags:function(){return new Promise(function(t,e){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("tags.list",{},function(s){"ok"===s.status?t(s):e(s)})})},userHistory:function(){return new Promise(function(t,e){var s=(new Date).getTimezoneOffset(),n=Math.abs(s),i=(s<0?"+":"-")+("00"+Math.floor(n/60)).slice(-2)+":"+("00"+n%60).slice(-2);sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.user.history.success",t),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.on("load.user.history.error",e),sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("load.user.history",{tz:i})})},userUpdate:function(t){return new Promise(function(e,s){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.send("users.update",t,function(t){"ok"===t.status?e(t):s(t)})})},changeAvatar:function changeAvatar(image){return new Promise(function(resolve,reject){if(!image)return resolve();var callbackName="sailplay_change_avatar_callback",data=new FormData;data.append("avatar",image);var url=sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.config().DOMAIN+sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.config().urls.users.update;url+="?auth_hash="+sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.config().auth_hash,url+="&callback="+callbackName,window[callbackName]=resolve;var request=new XMLHttpRequest;request.overrideMimeType("application/json"),request.open("POST",url,!0),request.onload=function(){request.responseText&&eval(request.responseText)},request.send(data)})},clearAuthHash:function(){sailplay_hub__WEBPACK_IMPORTED_MODULE_5___default.a.config().auth_hash=""}}},L7TM:function(t,e,s){},RnhZ:function(t,e,s){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(t){var e=a(t);return s(e)}function a(t){var e=n[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}i.keys=function(){return Object.keys(n)},i.resolve=a,t.exports=i,i.id="RnhZ"},Vtdi:function(t,e,s){"use strict";s.r(e);s("f3/d"),s("KKXr"),s("dRSK"),s("0l/t"),s("VRzm");var n=s("Kw5r"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isInited,expression:"isInited"}],attrs:{id:"app"}},[s("app-header",{ref:"header",attrs:{items:t.menu},on:{onSelect:t.onMenuClick}}),s("app-main",{ref:"main"}),s("app-gifts",{ref:"gifts"}),s("app-quests",{ref:"quests"}),s("app-badges",{directives:[{name:"show",rawName:"v-show",value:t.remoteConfig&&t.remoteConfig.showBadges,expression:"remoteConfig  && remoteConfig.showBadges"}],ref:"badges"}),s("app-shares",{ref:"shares"}),s("app-popup",{ref:"popup"})],1)},a=[],r=s("yT7P"),o=s("L2JU"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"header",class:{white:t.scrolled}},[s("a",{staticClass:"logo",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onClickLogo(e)}}}),s("div",{staticClass:"header-right"},[s("div",{staticClass:"menu"},t._l(t.items,function(e,n){return s("a",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!item.hide"}],key:n,class:{act:t.active===e.alias},attrs:{href:e.href||"#",target:e.target},on:{click:function(s){s.preventDefault(),t.onClick(e)}}},[t._v(t._s(e.name))])})),t.remoteConfig&&t.remoteConfig.addOrderLink?s("a",{staticClass:"header-btn",attrs:{href:t.remoteConfig.addOrderLink}},[t._v("Р—Р°СЂРµРіРёСЃС‚СЂРёСЂРѕРІР°С‚СЊ С‡РµРє")]):t._e()])]),s("a",{staticClass:"mob-menu-open",class:{"close-menu":t.opened},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.opened=!t.opened}}}),s("div",{staticClass:"mob-menu-overlay",class:{show:t.opened}},[s("div",{staticClass:"menu"},t._l(t.items,function(e,n){return s("a",{key:n,class:{act:t.active===e.alias},attrs:{href:e.href||"#",target:e.target},on:{click:function(s){s.preventDefault(),t.onClick(e)}}},[t._v(t._s(e.name))])}))])])},l=[],u=s("DzJC"),f=s.n(u),d={name:"AppHeader",props:{items:{type:Array}},data:function(){return{scrolled:!1,opened:!1,active:!1}},computed:Object(r["a"])({},Object(o["b"])(["remoteConfig"])),methods:{onClickLogo:function(){window.scrollTo(0,0)},onClick:function(t){return this.opened=!1,t.ref?this.$emit("onSelect",t):window.open(t.href,t.target),!1},onScroll:function(){var t=parseInt(window.pageYOffset||document.documentElement.scrollTop);if(this.scrolled=t>0,this.items){var e=this.items.filter(function(t){return!t.hide});if(e){var s=e.filter(function(e){var s=e.ref.$el&&e.ref.$el.getBoundingClientRect();if(s){var n=document.querySelector(".header").clientHeight,i=document.querySelector(".line").clientHeight,a=parseInt(s.top+window.pageYOffset-n-i);return a<=t}});s&&s.length&&(this.active=s.pop().alias)}}}},beforeMount:function(){this.onScroll(),window.addEventListener("scroll",f()(this.onScroll,100))},beforeDestroy:function(){window.removeEventListener("scroll",f()(this.onScroll,100))}},_=d,p=s("KHd+"),h=Object(p["a"])(_,c,l,!1,null,null,null),m=h.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top"},[s("div",{staticClass:"top-pattern"}),s("div",{staticClass:"wrapper"},[s("div",{staticClass:"top-img"}),s("div",{staticClass:"left"},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"ava"},[s("img",{attrs:{src:t.currentUser&&t.currentUser.pic}}),s("div",{staticClass:"hover"},[s("input",{staticClass:"file",attrs:{type:"file"},on:{change:t.onChangeAvatar}}),t._m(0)])]),s("div",{staticClass:"info"},[s("span",{staticClass:"name"},[t._v(t._s(t.currentUser&&t.currentUser.name))]),s("a",{staticClass:"btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openProfile(e)}}},[t._v("РџСЂРѕС„РёР»СЊ")])])]),s("div",{staticClass:"about"},[s("span",{staticClass:"head"},[t._v("Р”РѕР±СЂРѕ РїРѕР¶Р°Р»РѕРІР°С‚СЊ РІ РїСЂРѕРіСЂР°РјРјСѓ Р»РѕСЏР»СЊРЅРѕСЃС‚Рё РўР¦ РљР°РїРёС‚РѕР»РёР№")]),s("span",{staticClass:"desc open-sans"},[t._v("\n                    РЎРѕРІРµСЂС€Р°Р№С‚Рµ РїРѕРєСѓРїРєРё, РІС‹РїРѕР»РЅСЏР№С‚Рµ РїСЂРѕСЃС‚С‹Рµ Р·Р°РґР°РЅРёСЏ, РєРѕРїРёС‚Рµ Р±Р°Р»Р»С‹ Рё РјРµРЅСЏР№С‚Рµ РёС… РЅР° РїСЂРёСЏС‚РЅС‹Рµ РїРѕРґР°СЂРєРё. РљРѕР»Р»РµРєС†РёРѕРЅРёСЂСѓР№С‚Рµ Р±РµР№РґР¶Рё Рё СѓС‡Р°РІСЃС‚РІСѓР№С‚Рµ РІ СЂРѕР·С‹РіСЂС‹С€Р°С…. РЈРґР°С‡Рё!\n                ")]),s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isOpenPopup=!0}}},[t._v("РџРѕРґСЂРѕР±РЅРµРµ")])])]),s("div",{staticClass:"right"},[s("div",{staticClass:"ball",class:{type_full:!t.nextGift}},[s("span",{staticClass:"ball-num"},[s("strong",[t._v(t._s(t.currentPoints||0))]),t._v("\n                    "+t._s(t._f("pluralize")(t.currentPoints,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n                ")]),s("a",{staticClass:"right-btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openHistory(e)}}},[t._v("РСЃС‚РѕСЂРёСЏ РЅР°С‡РёСЃР»РµРЅРёР№")])]),t.nextGift?s("div",{staticClass:"next"},[s("span",{staticClass:"text open-sans"},[t._v("\n                    Р”Рѕ СЃР»РµРґСѓСЋС‰РµРіРѕ РїРѕРґР°СЂРєР° РѕСЃС‚Р°Р»РѕСЃСЊ РЅР°РєРѕРїРёС‚СЊ РµС‰Рµ "+t._s(t.nextGift.points-t.currentPoints)+"\n                ")]),s("a",{staticClass:"right-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.scrollToGift(t.nextGift.id)}}},[s("span",[t._v(t._s(t.nextGift.name))])])]):t._e()])]),t.isOpenPopup?s("div",{staticClass:"popup"},[s("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.isOpenPopup=!1}}}),t._m(1)]):t._e()])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"text"},[t._v("Р—Р°РіСЂСѓР·РёС‚СЊ"),s("br"),t._v("С„РѕС‚Рѕ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup-inner popup-inner-about"},[s("span",{staticClass:"head"},[t._v("\n                Рћ РїСЂРѕРіСЂР°РјРјРµ Р»РѕСЏР»СЊРЅРѕСЃС‚Рё РўР¦ РљР°РїРёС‚РѕР»РёР№\n            ")]),s("div",{staticClass:"desk"},[t._v("\n                Р‘Р»Р°РіРѕРґР°СЂСЏ С‚РѕРјСѓ, С‡С‚Рѕ РєР°Р¶РґР°СЏ РєР°С‚РµРіРѕСЂРёСЏ РёРјРµРµС‚ СЃРІРѕСЋ СЃС…РµРјСѓ, РІ РІРёРґРµ Р·РІРµРЅР°, РѕРґРЅРѕСЂРѕРґРЅРѕРіРѕ РєР°Рє СЃ СЏРІР»РµРЅРёРµРј, С‚Р°Рє Рё СЃ РєР°С‚РµРіРѕСЂРёРµР№. Р­С‚РѕР№ СЃС…РµРјРѕР№ РІ С„РёР»РѕСЃРѕС„РёРё РљР°РЅС‚Р° СЃС‡РёС‚Р°РµС‚СЃСЏ Р°РїСЂРёРѕСЂРЅРѕРµ РѕС‚РЅРѕС€РµРЅРёРµ РІСЂРµРјРµРЅРё (РЅР°РїРѕР»РЅРµРЅРЅРѕРµ РІСЂРµРјСЏ вЂ“ СЃС…РµРјР° РґРµР№СЃС‚РІРёС‚РµР»СЊРЅРѕСЃС‚Рё, РїСѓСЃС‚РѕРµ РІСЂРµРјСЏ вЂ“ СЃС…РµРјР° РѕС‚СЂРёС†Р°РЅРёСЏ Рё С‚. Рґ.), РѕС‚РЅРѕС€РµРЅРёРµ, РєРѕС‚РѕСЂРѕРµ Рё СѓРєР°Р·С‹РІР°РµС‚, РєР°РєР°СЏ РєР°С‚РµРіРѕСЂРёСЏ РїСЂРёР»РѕР¶РёРјР° Рє РґР°РЅРЅРѕРјСѓ РїСЂРµРґРјРµС‚Сѓ. (РЎРј. РЈС‡РµРЅРёРµ РљР°РЅС‚Р° Рѕ СЃС…РµРјР°С‚РёР·РјРµ.) РќРѕ С…РѕС‚СЏ РєР°С‚РµРіРѕСЂРёРё РїРѕ СЃРІРѕРµРјСѓ РїСЂРѕРёСЃС…РѕР¶РґРµРЅРёСЋ РЅРёСЃРєРѕР»СЊРєРѕ РЅРµ Р·Р°РІРёСЃСЏС‚ РѕС‚ РѕРїС‹С‚Р° Рё РґР°Р¶Рµ РѕР±СѓСЃР»РѕРІР»РёРІР°СЋС‚ РµРіРѕ.\n                "),s("br"),s("br"),t._v("\n                Р‘Р»Р°РіРѕРґР°СЂСЏ С‚РѕРјСѓ, С‡С‚Рѕ РєР°Р¶РґР°СЏ РєР°С‚РµРіРѕСЂРёСЏ РёРјРµРµС‚ СЃРІРѕСЋ СЃС…РµРјСѓ, РІ РІРёРґРµ Р·РІРµРЅР°, РѕРґРЅРѕСЂРѕРґРЅРѕРіРѕ РєР°Рє СЃ СЏРІР»РµРЅРёРµРј, С‚Р°Рє Рё СЃ РєР°С‚РµРіРѕСЂРёРµР№. Р­С‚РѕР№ СЃС…РµРјРѕР№ РІ С„РёР»РѕСЃРѕС„РёРё РљР°РЅС‚Р° СЃС‡РёС‚Р°РµС‚СЃСЏ Р°РїСЂРёРѕСЂРЅРѕРµ РѕС‚РЅРѕС€РµРЅРёРµ РІСЂРµРјРµРЅРё (РЅР°РїРѕР»РЅРµРЅРЅРѕРµ РІСЂРµРјСЏ вЂ“ СЃС…РµРјР° РґРµР№СЃС‚РІРёС‚РµР»СЊРЅРѕСЃС‚Рё, РїСѓСЃС‚РѕРµ РІСЂРµРјСЏ вЂ“ СЃС…РµРјР° РѕС‚СЂРёС†Р°РЅРёСЏ Рё С‚. Рґ.), РѕС‚РЅРѕС€РµРЅРёРµ, РєРѕС‚РѕСЂРѕРµ Рё СѓРєР°Р·С‹РІР°РµС‚, РєР°РєР°СЏ РєР°С‚РµРіРѕСЂРёСЏ РїСЂРёР»РѕР¶РёРјР° Рє РґР°РЅРЅРѕРјСѓ РїСЂРµРґРјРµС‚Сѓ. (РЎРј. РЈС‡РµРЅРёРµ РљР°РЅС‚Р° Рѕ СЃС…РµРјР°С‚РёР·РјРµ.) РќРѕ С…РѕС‚СЏ РєР°С‚РµРіРѕСЂРёРё РїРѕ СЃРІРѕРµРјСѓ РїСЂРѕРёСЃС…РѕР¶РґРµРЅРёСЋ РЅРёСЃРєРѕР»СЊРєРѕ РЅРµ Р·Р°РІРёСЃСЏС‚ РѕС‚ РѕРїС‹С‚Р° Рё РґР°Р¶Рµ РѕР±СѓСЃР»РѕРІР»РёРІР°СЋС‚ РµРіРѕ.\n                "),s("br"),s("br"),t._v("\n                Р‘Р»Р°РіРѕРґР°СЂСЏ С‚РѕРјСѓ, С‡С‚Рѕ РєР°Р¶РґР°СЏ РєР°С‚РµРіРѕСЂРёСЏ РёРјРµРµС‚ СЃРІРѕСЋ СЃС…РµРјСѓ, РІ РІРёРґРµ Р·РІРµРЅР°, РѕРґРЅРѕСЂРѕРґРЅРѕРіРѕ РєР°Рє СЃ СЏРІР»РµРЅРёРµРј, С‚Р°Рє Рё СЃ РєР°С‚РµРіРѕСЂРёРµР№. Р­С‚РѕР№ СЃС…РµРјРѕР№ РІ С„РёР»РѕСЃРѕС„РёРё РљР°РЅС‚Р° СЃС‡РёС‚Р°РµС‚СЃСЏ Р°РїСЂРёРѕСЂРЅРѕРµ РѕС‚РЅРѕС€РµРЅРёРµ РІСЂРµРјРµРЅРё (РЅР°РїРѕР»РЅРµРЅРЅРѕРµ РІСЂРµРјСЏ вЂ“ СЃС…РµРјР° РґРµР№СЃС‚РІРёС‚РµР»СЊРЅРѕСЃС‚Рё, РїСѓСЃС‚РѕРµ РІСЂРµРјСЏ вЂ“ СЃС…РµРјР° РѕС‚СЂРёС†Р°РЅРёСЏ Рё С‚. Рґ.), РѕС‚РЅРѕС€РµРЅРёРµ, РєРѕС‚РѕСЂРѕРµ Рё СѓРєР°Р·С‹РІР°РµС‚, РєР°РєР°СЏ РєР°С‚РµРіРѕСЂРёСЏ РїСЂРёР»РѕР¶РёРјР° Рє РґР°РЅРЅРѕРјСѓ РїСЂРµРґРјРµС‚Сѓ. (РЎРј. РЈС‡РµРЅРёРµ РљР°РЅС‚Р° Рѕ СЃС…РµРјР°С‚РёР·РјРµ.) РќРѕ С…РѕС‚СЏ РєР°С‚РµРіРѕСЂРёРё РїРѕ СЃРІРѕРµРјСѓ РїСЂРѕРёСЃС…РѕР¶РґРµРЅРёСЋ РЅРёСЃРєРѕР»СЊРєРѕ РЅРµ Р·Р°РІРёСЃСЏС‚ РѕС‚ РѕРїС‹С‚Р° Рё РґР°Р¶Рµ РѕР±СѓСЃР»РѕРІР»РёРІР°СЋС‚ РµРіРѕ.\n            ")])])}],C={name:"AppMain",data:function(){return{isOpenPopup:!1}},computed:Object(r["a"])({},Object(o["b"])(["currentUser","currentPoints","nextGift"])),watch:{isOpenPopup:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},methods:{onChangeAvatar:function(t){var e=this,s=t.target&&t.target.files&&t.target.files[0];this.$store.dispatch("changeAvatar",s).then(function(){e.$store.dispatch("fetchUser")})},scrollToGift:function(t){this.$eventBus.$emit("giftOpen",t)},openProfile:function(){this.$eventBus.$emit("popup","profile")},openHistory:function(){this.$eventBus.$emit("popup","history")}}},b=C,y=Object(p["a"])(b,v,g,!1,null,null,null),k=y.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"gift"},[t._m(0),s("div",{ref:"categoryBar",staticClass:"line-wrap"},[s("div",{staticClass:"line",class:{fix:t.fixed}},[t.isMounted&&t.isInited?s("div",{staticClass:"line-fill",style:{width:t.lineWidth+"px"}}):t._e(),s("div",{staticClass:"line-container"},[s("span",{staticClass:"line-ball"},[t._v("РЈ РІР°СЃ "+t._s(t.currentPoints)+" "+t._s(t._f("pluralize")(t.currentPoints,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ")))]),t._l(t.sortedGiftList,function(e,n){return s("a",{key:n,ref:"checkpoint_"+(n+1),refInFor:!0,staticClass:"checkpoint",class:{act:t.currentPoints>=e.points},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.onScrollTo(e.id)}}},[s("img",{attrs:{src:t.currentPoints>=e.points?e.data.active_icon:e.data.icon}}),s("div",{staticClass:"hover-info"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("span",{staticClass:"ball"},[t._v(t._s(e.points)+" "+t._s(t._f("pluralize")(e.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ")))]),s("span",{staticClass:"ball-need"},[t.currentPoints<e.points?s("span",[t._v("\n                                РќСѓР¶РЅРѕ РµС‰Рµ "+t._s(e.points-t.currentPoints)+" "+t._s(t._f("pluralize")(e.points-t.currentPoints,"Р±Р°Р»Р»Р°,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n                            ")]):t._e()])])])})],2)]),t.isInited&&t.sortedGiftList&&t.sortedGiftList.length?s("div",{staticClass:"wrapper"},[t.isMobile?s("div",{staticClass:"coll mobile"},t._l(t.sortedGiftList,function(e,n){return s("div",{key:n,ref:"mobile_gift_"+e.id,refInFor:!0,staticClass:"gift-item"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.data.image}}),s("div",{staticClass:"gift-hover"},[e.points<=t.currentPoints?s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.openGift(e)}}},[t._v("РџРѕР»СѓС‡РёС‚СЊ РїРѕРґР°СЂРѕРє")]):s("span",{staticClass:"red-btn red-btn-dis"},[t._v("РќРµ С…РІР°С‚Р°РµС‚ "+t._s(e.points-t.currentPoints)+" "+t._s(t._f("pluralize")(e.points-t.currentPoints,"Р±Р°Р»Р»Р°,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ")))])])]),s("div",{staticClass:"info"},[s("span",{staticClass:"name",on:{click:function(s){s.preventDefault(),t.openGift(e)}}},[t._v(t._s(e.name))]),s("span",{staticClass:"ball"},[t._v("\n                            "+t._s(e.points)+" "+t._s(t._f("pluralize")(e.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n                        ")]),s("span",{staticClass:"desc"},[t._v(t._s(e.data.description))])])])})):t._e(),t.isMobile?t._e():s("div",{staticClass:"coll"},t._l(t.giftsToLeft,function(e,n){return s("div",{key:n,ref:"gift_"+e.id,refInFor:!0,staticClass:"gift-item",class:{"gift-item-sm":"small"===e.type,"gift-item-big":"big"===e.type}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.data.image}}),s("div",{staticClass:"gift-hover"},[e.points<=t.currentPoints?s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.openGift(e)}}},[t._v("РџРѕР»СѓС‡РёС‚СЊ РїРѕРґР°СЂРѕРє")]):s("span",{staticClass:"red-btn red-btn-dis"},[t._v("РќРµ С…РІР°С‚Р°РµС‚ "+t._s(e.points-t.currentPoints)+" "+t._s(t._f("pluralize")(e.points-t.currentPoints,"Р±Р°Р»Р»Р°,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ")))])])]),s("div",{staticClass:"info"},[s("span",{staticClass:"name",on:{click:function(s){s.preventDefault(),t.openGift(e)}}},[t._v(t._s(e.name))]),s("span",{staticClass:"ball"},[t._v("\n                            "+t._s(e.points)+" "+t._s(t._f("pluralize")(e.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n                        ")]),s("span",{staticClass:"desc"},[t._v(t._s(e.data.description))])])])})),t.isMobile?t._e():s("div",{staticClass:"coll"},t._l(t.giftsToRight,function(e,n){return s("div",{key:n,ref:"gift_"+e.id,refInFor:!0,staticClass:"gift-item",class:{"gift-item-sm":"small"===e.type,"gift-item-big":"big"===e.type}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.data.image}}),s("div",{staticClass:"gift-hover"},[e.points<=t.currentPoints?s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.openGift(e)}}},[t._v("РџРѕР»СѓС‡РёС‚СЊ РїРѕРґР°СЂРѕРє")]):s("span",{staticClass:"red-btn red-btn-dis"},[t._v("РќРµ С…РІР°С‚Р°РµС‚ "+t._s(e.points-t.currentPoints)+" "+t._s(t._f("pluralize")(e.points-t.currentPoints,"Р±Р°Р»Р»Р°,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ")))])])]),s("div",{staticClass:"info"},[s("span",{staticClass:"name",on:{click:function(s){s.preventDefault(),t.openGift(e)}}},[t._v(t._s(e.name))]),s("span",{staticClass:"ball"},[t._v("\n                            "+t._s(e.points)+" "+t._s(t._f("pluralize")(e.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n                        ")]),s("span",{staticClass:"desc"},[t._v(t._s(e.data.description))])])])}))]):t._e()]),t.gift&&!t.success?s("div",{staticClass:"popup"},[s("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.gift=!1}}}),s("div",{staticClass:"popup-inner popup-inner-gift"},[s("div",{staticClass:"info"},[s("span",{staticClass:"name"},[t._v(t._s(t.gift.name))]),s("span",{staticClass:"desc"},[t._v(t._s(t.gift.data.description))]),t.gift.points<=t.currentPoints?s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.getGift(t.gift)}}},[t._v("РџРѕР»СѓС‡РёС‚СЊ Р·Р° "+t._s(t.gift.points)+" "+t._s(t._f("pluralize")(t.gift.points,"Р±Р°Р»Р»Р°,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ")))]):s("span",{staticClass:"red-btn cancel"},[t._v("РќРµРґРѕСЃС‚Р°С‚РѕС‡РЅРѕ Р±Р°Р»Р»РѕРІ")])]),s("div",{staticClass:"img"},[s("img",{attrs:{src:t.gift.data.image}})])])]):t._e(),t.gift&&t.success?s("div",{staticClass:"popup"},[s("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.success=null,t.gift=null}}}),s("div",{staticClass:"popup-inner popup-inner-gift"},[s("div",{staticClass:"info"},[s("span",{staticClass:"name"},[t._v("РџРѕР·РґСЂР°РІР»СЏРµРј!")]),s("span",{staticClass:"desc"},[t._v("\n                    Р§С‚РѕР±С‹ РїРѕР»СѓС‡РёС‚СЊ РїРѕРґР°СЂРѕРє В«"+t._s(t.gift.name)+"В», РёСЃРїРѕР»СЊР·СѓР№С‚Рµ РєРѕРґ РІ Р»СЋР±РѕРј РўР¦ В«РљР°РїРёС‚РѕР»РёР№В» РЅР° СЃС‚РѕР№РєРµ РёРЅС„РѕСЂРјР°С†РёРё.\n                ")]),s("span",{staticClass:"number"},[t._v(t._s(t.success.coupon_number))])]),s("div",{staticClass:"img"},[s("img",{attrs:{src:t.gift.data.image}})])])]):t._e()])},E=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("span",{staticClass:"block-head"},[t._v("\n            РџРѕРґР°СЂРєРё РґР»СЏ РІР°СЃ\n        ")]),s("span",{staticClass:"block-desc open-sans"},[t._v("\n            РњС‹ С†РµРЅРёРј РІР°СЃ Рё Р±Р»Р°РіРѕРґР°СЂРёРј Р·Р° С‚Рѕ, С‡С‚Рѕ РІС‹ СЃ РЅР°РјРё. РџРѕСЌС‚РѕРјСѓ СЃ РєР°Р¶РґРѕР№ РїРѕРєСѓРїРєРё РІР°Рј РЅР°С‡РёСЃР»СЏСЋС‚СЃСЏ Р±Р°Р»Р»С‹, РєРѕС‚РѕСЂС‹Рµ РјРѕР¶РЅРѕ РѕР±РјРµРЅСЏС‚СЊ РЅР° СЌС‚Рё РїРѕРґР°СЂРєРё.\n        ")])])}],D=(s("bWfx"),s("Vd3H"),s("91GP"),100),P=100,j={name:"AppGifts",data:function(){return{isMobile:!1,lineWidth:0,isMounted:!1,holding:!1,fixed:!1,gift:null,success:null}},watch:{isInited:function(){this.updateLineWidth()}},computed:Object(r["a"])({},Object(o["b"])(["isInited","currentUser","currentPoints","giftList"]),{sortedGiftList:function(){var t=this.giftList&&Object.assign([],this.giftList);return t&&t.sort(function(t,e){return t.points-e.points})},giftsToLeft:function(){return this.sortedGiftList&&this.sortedGiftList.filter(function(t,e){return e%2===0}).map(function(t,e){return t.type=e%2===0?"big":"small",t})},giftsToRight:function(){return this.sortedGiftList&&this.sortedGiftList.filter(function(t,e){return e%2!==0}).map(function(t,e){return t.type=e%2===0?"small":"big",t})}}),filters:{json:function(t){return JSON.stringify(t,null,2)}},methods:{openGift:function(t){this.gift=Object.assign({},t)},updateLineWidth:function(){var t=this;if(window.innerWidth<1024?this.isMobile=!0:this.isMobile=!1,this.sortedGiftList){var e=this.sortedGiftList.filter(function(e){return e.points<=t.currentPoints}),s=0;if(e.length){var n=this.$refs["checkpoint_"+e.length];if(n&&n[0]){var i=n[0].getBoundingClientRect();s=i.left+i.width}}else s=0;this.lineWidth=s}},getGift:function(t){var e=this;this.holding||(this.holding=!0,this.$store.dispatch("getGift",t).then(function(t){e.success=t,e.$store.dispatch("fetchUser"),e.$store.dispatch("fetchHistory"),e.$store.dispatch("fetchGifts"),e.holding=!1}))},onScrollTo:function(t){var e=this.$refs["gift_"+t]||this.$refs["mobile_gift_"+t];if(e){var s=e[0].getBoundingClientRect(),n=document.querySelector(".header").clientHeight,i=this.$refs["categoryBar"].querySelector(".line").clientHeight,a=s.top+window.pageYOffset-n-i;0!==a&&window.scrollTo(s.left,a)}},onScroll:function(){if(this.$refs["categoryBar"]){var t=window.pageYOffset||document.documentElement.scrollTop,e=this.$refs["categoryBar"].getBoundingClientRect(),s=this.$refs["categoryBar"].querySelector(".line").clientHeight,n=e.top+window.pageYOffset-s;t>=n&&t<n+e.height-s?this.fixed=!0:this.fixed=!1}}},beforeMount:function(){window.addEventListener("resize",f()(this.updateLineWidth,P)),window.addEventListener("scroll",f()(this.onScroll,D))},beforeDestroy:function(){window.removeEventListener("resize",f()(this.updateLineWidth,P)),window.removeEventListener("scroll",f()(this.onScroll,D))},mounted:function(){this.onScroll(),this.isMounted=!0,window.innerWidth<1024&&(this.isMobile=!0),this.$eventBus.$on("giftOpen",this.onScrollTo)}},w=j,M=Object(p["a"])(w,O,E,!1,null,null,null),T=M.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tasks"},[t._l(t.quests,function(e,n){return s("div",{key:n,staticClass:"task-item",class:{"has-share":e.vk||e.fb}},[e.vk||e.fb?s("div",{key:"social_quest"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.data.pic}})]),s("span",{staticClass:"head"},[t._v(t._s(e.data.name))]),s("span",{staticClass:"ball"},[t._v("\n                +"+t._s(e.data.points)+" "+t._s(t._f("pluralize")(e.data.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n            ")]),e.vk||e.fb?s("div",{staticClass:"share"},[s("div",{staticClass:"to-bottom"},[e.vk?s("a",{staticClass:"vk",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.onOpenSocial(e,"vk")}}}):t._e(),e.fb?s("a",{staticClass:"fb",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.onOpenSocial(e,"fb")}}}):t._e()])]):t._e()]):!e._actionId||e.vk||e.fb?e._actionId?t._e():s("div",{key:"custom_quest",on:{click:function(s){t.onOpenCustom(e)}}},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.data.pic}})]),s("span",{staticClass:"head"},[t._v(t._s(e.data.name))]),s("span",{staticClass:"ball"},[t._v("\n                +"+t._s(e.data.points)+" "+t._s(t._f("pluralize")(e.data.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n            ")])]):s("a",{directives:[{name:"system-action",rawName:"v-system-action",value:e,expression:"quest"}],key:"custom_quest"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.data.pic}})]),s("span",{staticClass:"head"},[t._v(t._s(e.data.name))]),s("span",{staticClass:"ball"},[t._v("\n                +"+t._s(e.data.points)+" "+t._s(t._f("pluralize")(e.data.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n            ")])])])}),t.open?s("div",{staticClass:"popup"},[s("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onClosePopup(t.open)}}}),t.open._actionId?s("div",{key:"open_social",staticClass:"popup-inner popup-inner-quest"},[s("div",{staticClass:"img"}),s("span",{staticClass:"head"},[t._v(t._s(t.open.data.name))]),s("span",{staticClass:"ball"},[t._v("\n                +"+t._s(t.open.data.points)+" "+t._s(t._f("pluralize")(t.open.data.points,"Р±Р°Р»Р»,Р±Р°Р»Р»Р°,Р±Р°Р»Р»РѕРІ"))+"\n            ")]),s("div",{directives:[{name:"system-action",rawName:"v-system-action",value:t.open,expression:"open"}]},[t._v(t._s(t.open.data.button_text))])]):t.open._actionId?t._e():s("div",{key:"open_custom",staticClass:"popup-inner popup-inner-iframe"},[s("iframe",{staticClass:"custom-iframe",attrs:{src:t._f("customIframe")(t.open)}})])]):t._e()],2)},U=[],B=(s("pIFo"),s("iv4g")),A=s("oyJW"),I=(s("DNiP"),s("Tze0"),s("zdTi")),x=s.n(I),$=s("obyI"),S={"font-size":"15px","font-weight":"bold",display:"inline-block",color:"#ffffff","line-height":"40px","background-color":"#cd3c3c",padding:"0 30px","text-decoration":"none","font-family":"Arial",cursor:"pointer"},R={fb_share_btn:S,vk_share_btn:S},W=2e3,K=function(t,e){var s="",n="";for(var i in e)if(e.hasOwnProperty(i)){if("@"==i[0]&&i.split("|").length>1){var a=i.split("|")[0].trim(),r=i.split("|")[1].trim();n+=a+"{ "+t+" ."+r+"{ "}else s+=t+" ."+i+"{ ";var o=e[i];for(var c in o)o.hasOwnProperty(c)&&("@"==i[0]?n+=c+":"+o[c]+" !important;":s+=c+":"+o[c]+" !important;");"@"==i[0]?n+=" } }":s+=" }"}return s+=n,s},z={name:"AppQuests",data:function(){return{isMounted:!1,open:null}},directives:{systemAction:{bind:function(t,e){var s=e.value;t.setAttribute("data-styles",K("",s.data.styles||R)),t.setAttribute("data-text",s.data.button_text),x.a.actions&&s&&x.a.actions.parse(t,s)}}},watch:{open:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},computed:Object(r["a"])({},Object(o["b"])(["questList","remoteConfig"]),{quests:function(){if(this.isMounted&&this.remoteConfig&&this.questList){var t=this.remoteConfig.quests,e=this.questList.filter(function(t){return t.socialType}),s=e.reduce(function(e,s){var n=e.find(function(t){return t.action===s.action});if(n)n[s.socialType]=s;else{var i,a=(i={_actionId:s._actionId,action:s.action},Object(A["a"])(i,s.socialType,s),Object(A["a"])(i,"data",t.social[s.action]),i);e=Object(B["a"])(e).concat([a])}return e},[]),n=this.questList.filter(function(t){return!t._actionId});s=Object(B["a"])(s).concat(Object(B["a"])(n.map(function(e){return e.data=t.custom[e.type],e})));var i=this.questList.filter(function(t){return!t.socialType&&t._actionId});return s=Object(B["a"])(s).concat(Object(B["a"])(i.map(function(e){return e.data=t.system[e.type],e}))),s}}}),filters:{customIframe:function(t){var e=x.a.config();return $["a"]&&$["a"].domain+e.urls.actions.custom.render.replace(":action_id",t.id)+"?auth_hash="+e.auth_hash+"&lang="+e.lang+"&config="+($["a"].remote_config_name||"default")||""}},methods:{onOpenSocial:function(t,e){var s=this.questList.find(function(s){return t.action===s.action&&s.socialType===e});s.data=t.data,this.open=Object.assign({},s)},onClosePopup:function(t){this.open=!1,this.open._actionId||this.$store.dispatch("fetchQuests")},onOpenCustom:function(t){this.open=Object.assign({},t)}},mounted:function(){var t=this;this.isMounted=!0,x.a.on("actions.perform.success",function(e){setTimeout(function(){t.open=!1,t.$store.dispatch("fetchQuests")},W)})}},q=z,G=Object(p["a"])(q,L,U,!1,null,null,null),H=G.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isInited?s("div",{staticClass:"badges"},[s("div",{staticClass:"left"},[s("div",{staticClass:"left-wrap"},[s("span",{staticClass:"block-head"},[t._v("Р‘РµР№РґР¶Рё")]),s("span",{staticClass:"block-desc open-sans"},[t._v("\n                Р’С‹РїРѕР»РЅСЏР№С‚Рµ Р·Р°РґР°РЅРёСЏ, СЃРѕРІРµСЂС€Р°Р№С‚Рµ РґРµР№СЃС‚РІРёСЏ РЅР° СЃР°Р№С‚Рµ, С‡С‚РѕР±С‹ РїРѕР»СѓС‡РёС‚СЊ Р±РµР№РґР¶Рё. РЎРѕР±РµСЂРёС‚Рµ РІСЃРµ Рё РїРѕР»СѓС‡РёС‚Рµ РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅС‹Рµ Р±Р°Р»Р»С‹!\n            ")]),s("div",{staticClass:"badges-main"},t._l(t.badges,function(e,n){return s("div",{key:n,staticClass:"item",class:{act:e.is_received},on:{click:function(s){t.open=e}}},[e.data&&(e.is_received?e.data.icon_active:e.data.icon)?s("img",{attrs:{src:e.is_received?e.data.icon_active:e.data.icon}}):t._e()])}))])]),s("div",{staticClass:"right"},[t.open&&t.open.data?s("div",{staticClass:"badges-select"},[s("div",{staticClass:"img"},[t.open.data.image?s("img",{attrs:{src:t.open.data.image}}):t._e()]),t.open.is_received?s("div",{staticClass:"gal"}):t._e(),s("span",{staticClass:"head"},[t._v(t._s(t.open.name))]),s("span",{staticClass:"desc open-sans"},[t._v(t._s(t.open.data.description))]),s("div",{staticClass:"share"})]):t._e()])]):t._e()},N=[],F=(s("rGqo"),s("8+KV"),{name:"AppBadges",data:function(){return{open:null}},watch:{isInited:function(){this.badges&&this.badges.length&&!this.open&&(this.open=this.badges[0])}},computed:Object(r["a"])({},Object(o["b"])(["badgeList","isInited"]),{badges:function(){var t=[];return this.badgeList&&(t=Object(B["a"])(this.badgeList.oneLevelBadges),this.badgeList.multilevelBadges.length&&this.badgeList.multilevelBadges.forEach(function(e){t=Object(B["a"])(t).concat(Object(B["a"])(e))})),t}})}),Y=F,Q=Object(p["a"])(Y,V,N,!1,null,null,null),J=Q.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stock"},[s("div",{staticClass:"wrapper"},[s("span",{staticClass:"block-head"},[t._v("Р РѕР·С‹РіСЂС‹С€Рё Рё Р°РєС†РёРё")]),s("div",{ref:"filters",staticClass:"filters"},[t.isInited?s("div",{staticClass:"act-line",style:t.styles}):t._e(),s("a",{staticClass:"type_active",class:{act:"active"===t.filterBy},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterBy="active"}}},[s("span",{staticClass:"text"},[t._v("РђРєС‚РёРІРЅС‹Рµ")])]),s("a",{staticClass:"type_use",class:{"has-num":t.inUse,act:"use"===t.filterBy},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterBy="use"}}},[s("span",{staticClass:"text"},[t._v("Р’С‹ СѓС‡Р°СЃС‚РІСѓРµС‚Рµ")]),t.inUse?s("span",{staticClass:"num"},[t._v(t._s(t.inUse))]):t._e()]),s("a",{staticClass:"type_ended",class:{act:"ended"===t.filterBy},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterBy="ended"}}},[s("span",{staticClass:"text"},[t._v("Р—Р°РєРѕРЅС‡РёРІС€РёРµСЃСЏ")])])]),s("div",{staticClass:"stock-main"},t._l(t.items,function(e,n){return s("div",{key:n,staticClass:"item"},[s("div",{staticClass:"img",on:{click:function(s){t.open=e}}},[s("img",{attrs:{src:e.image}}),"new"===e.type?s("span",{staticClass:"status"},[t._v("РќРѕРІС‹Р№ СЂРѕР·С‹РіСЂС‹С€")]):t._e(),"use"===e.type?s("span",{staticClass:"status status-y"},[t._v("Р’С‹ СѓС‡Р°СЃС‚РІСѓРµС‚Рµ")]):t._e(),"winner"===e.type?s("span",{staticClass:"status status-w"},[t._v("Р’С‹ РїРѕР±РµРґРёР»Рё")]):t._e(),s("div",{staticClass:"hover"},[s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.open=e}}},[t._v("РџРѕРґСЂРѕР±РЅРµРµ")])])]),s("div",{staticClass:"info"},[e.startDate&&e.endDate?s("span",{staticClass:"date"},[t._v("\n                        РЎ "+t._s(t._f("moment")(e.startDate,"D MMMM"))+" РїРѕ "+t._s(t._f("moment")(e.endDate,"D MMMM"))+"\n                    ")]):t._e(),s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("span",{staticClass:"desc"},[t._v(t._s(e.short_description))])])])}))]),t.open?s("div",{staticClass:"popup"},[s("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.open=null}}}),s("div",{staticClass:"popup-inner popup-inner-stock"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.open.image}}),"new"===t.open.type?s("span",{staticClass:"status"},[t._v("РќРѕРІС‹Р№ СЂРѕР·С‹РіСЂС‹С€")]):t._e(),"use"===t.open.type?s("span",{staticClass:"status status-y"},[t._v("Р’С‹ СѓС‡Р°СЃС‚РІСѓРµС‚Рµ")]):t._e(),"winner"===t.open.type?s("span",{staticClass:"status status-w"},[t._v("Р’С‹ РїРѕР±РµРґРёР»Рё")]):t._e()]),s("div",{staticClass:"info"},[t.open.startDate&&t.open.endDate?s("span",{staticClass:"date"},[t._v("\n                    РЎ "+t._s(t._f("moment")(t.open.startDate,"D MMMM"))+" РїРѕ "+t._s(t._f("moment")(t.open.endDate,"D MMMM"))+"\n                ")]):t._e(),s("span",{staticClass:"name"},[t._v(t._s(t.open.name))]),s("span",{staticClass:"desc",domProps:{innerHTML:t._s(t.open.description)}})]),t.open.hideBtn||"winner"===t.open.type||"use"===t.open.type||"ended"===t.open.type?t._e():s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onJoin(t.open)}}},[t._v(t._s(t.loading?"Р—Р°РіСЂСѓР·РєР°...":"РџСЂРёРЅСЏС‚СЊ СѓС‡Р°СЃС‚РёРµ"))]),t.open.hideBtn||"use"!==t.open.type?t._e():s("a",{staticClass:"red-btn",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onDisconnect(t.open)}}},[t._v(t._s(t.loading?"Р—Р°РіСЂСѓР·РєР°...":"РќРµ СѓС‡Р°СЃС‚РІРѕРІР°С‚СЊ"))])])]):t._e()])},Z=[],tt=2e3,et={name:"AppShares",data:function(){return{isMounted:!1,loading:!1,open:null,filterBy:"active"}},watch:{open:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},computed:Object(r["a"])({},Object(o["b"])(["currentTags","remoteConfig","isInited"]),{inUse:function(){var t=this;if(this.remoteConfig&&this.remoteConfig.shares){var e=this.$moment();return this.currentTags&&this.currentTags.length&&this.remoteConfig&&this.remoteConfig.shares.filter(function(s){var n=t.$moment(s.endDate).isBefore(e);return t.$options.filters["tagExist"](s.tag)&&!n}).length}},items:function(){var t=this,e=[];if(this.remoteConfig&&this.remoteConfig.shares){var s=this.$moment();e=this.remoteConfig.shares.filter(function(e){var n=!!e.tag&&t.$options.filters["tagExist"](e.tag),i=t.$moment(e.endDate).isBefore(s);return"use"===t.filterBy?n&&!i:"active"===t.filterBy?!n&&!i:"ended"===t.filterBy?i:void 0}).map(function(e){var n=!!e.tag&&t.$options.filters["tagExist"](e.tag),i=t.$moment(t.$moment().subtract(7,"days")).isBefore(t.$moment(e.startDate)),a=!!e.winnerTag&&t.$options.filters["tagExist"](e.winnerTag),r=t.$moment(e.endDate).isBefore(s);return i&&(e.type="new"),e.type=n?"use":"",a&&(e.type="winner"),r&&(e.type="ended"),e})}return e},styles:function(){if(this.isMounted){var t={width:0,left:0},e=this.$refs["filters"],s=e.getBoundingClientRect(),n=this.filterBy;if("active"===n){var i=e.querySelector(".type_active").getBoundingClientRect();t.width=i.width,t.left=i.left-s.left}else if("use"===n){var a=e.querySelector(".type_use").getBoundingClientRect();t.width=a.width,t.left=a.left-s.left}else if("ended"===n){var r=e.querySelector(".type_ended").getBoundingClientRect();t.width=r.width,t.left=r.left-s.left}return t.width+="px",t.left+="px",t}}}),methods:{onJoin:function(t){var e=this;if(!this.loading){var s={add:[t.tag]},n=function(){e.loading=!1,e.open=!1,e.filterBy="use"};this.loading=!0,this.$store.dispatch("changeTags",s).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(n,n)},tt)})}},onDisconnect:function(t){var e=this;if(!this.loading){var s={remove:[t.tag]},n=function(){e.loading=!1,e.open=!1,e.filterBy="active"};this.loading=!0,this.$store.dispatch("changeTags",s).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(n,n)},tt)})}}},mounted:function(){this.isMounted=!0}},st=et,nt=Object(p["a"])(st,X,Z,!1,null,null,null),it=nt.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.show?s("div",{staticClass:"popup"},[s("a",{staticClass:"close",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange(!1)}}}),s("div",{staticClass:"popup-inner"},[s("div",{staticClass:"left"},[s("div",{staticClass:"left-wrap"},[s("div",{staticClass:"popup-menu"},[s("a",{class:{act:"profile"===t.type||"profile-edit"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("profile")}}},[t._v("Р›РёС‡РЅС‹Рµ РґР°РЅРЅС‹Рµ")]),s("a",{class:{act:"channels"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("channels")}}},[t._v("РљР°РЅР°Р»С‹ РєРѕРјРјСѓРЅРёРєР°С†РёРё")]),s("a",{class:{act:"favorites"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("favorites")}}},[t._v("РР·Р±СЂР°РЅРЅРѕРµ")]),s("a",{class:{act:"history"===t.type},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("history")}}},[t._v("РСЃС‚РѕСЂРёСЏ")])]),t.remoteConfig&&t.remoteConfig.logoutLink?s("a",{staticClass:"exit-btn",attrs:{href:t.remoteConfig.logoutLink}},[t._v("Р’С‹Р№С‚Рё")]):t._e()]),s("div",{staticClass:"banner"},[s("a",{attrs:{href:t.remoteConfig.bannerLink||"#"}},[s("img",{attrs:{src:t.remoteConfig.bannerImage}})])])]),"profile"===t.type||"profile-edit"===t.type?s("app-popup-profile",{attrs:{type:t.type},on:{onChange:function(e){t.type=e}}}):t._e(),"channels"===t.type?s("app-popup-channels"):t._e(),"favorites"===t.type?s("app-popup-favorites"):t._e(),"history"===t.type?s("app-popup-history"):t._e()],1)]):t._e()},rt=[],ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("span",{staticClass:"popup-head"},[t._v("Р›РёС‡РЅС‹Рµ РґР°РЅРЅС‹Рµ")]),s("span",{staticClass:"popup-desc"},[t._v("\n        РњС‹ С†РµРЅРёРј РІР°СЃ Рё Р±Р»Р°РіРѕРґР°СЂРёРј Р·Р° С‚Рѕ, С‡С‚Рѕ РІС‹ СЃ РЅР°РјРё. РџРѕСЌС‚РѕРјСѓ СЃ РєР°Р¶РґРѕР№ РїРѕРєСѓРїРєРё.\n    ")]),t.currentUser&&t.fields?s("div",{staticClass:"lk-form"},[t._l(t.fields,function(e,n){return s("div",{key:n,staticClass:"lk-row"},[s("label",[t._v(t._s(e.name))]),e.model&&"profile"===t.type?s("span",{staticClass:"input-value"},[t._v("\n                "+t._s(t.getFieldValue(e))+"\n            ")]):!e.model&&e.points&&"profile"===t.type?s("span",{staticClass:"ball-plus"},[t._v("\n                +"+t._s(e.points)+" Р±Р°Р»Р»РѕРІ\n            ")]):t._e(),"profile-edit"!==t.type||e.input?t._e():s("div",{staticClass:"input-block"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"field.model"}],attrs:{type:"text"},domProps:{value:e.model},on:{input:function(s){s.target.composing||t.$set(e,"model",s.target.value)}}})]),"profile-edit"===t.type&&"phone"===e.input?s("div",{staticClass:"input-block phone"},[s("masked-input",{attrs:{mask:t.phoneMask,guide:!0,type:"text"},model:{value:e.model,callback:function(s){t.$set(e,"model",s)},expression:"field.model"}})],1):t._e(),"profile-edit"===t.type&&"date"===e.input?s("div",{staticClass:"input-block calendar"},[s("datepicker",{attrs:{language:t.datepickerLocale,format:t.dateFormatter},model:{value:e.model,callback:function(s){t.$set(e,"model",s)},expression:"field.model"}})],1):t._e(),"profile-edit"===t.type&&"radio"===e.input?s("div",{staticClass:"radio"},t._l(e.options,function(n,i){return s("div",{key:i,staticClass:"radio-item"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"field.model"}],attrs:{type:"radio",id:e.setField+n.value,name:e.setField},domProps:{value:n.value,checked:t._q(e.model,n.value)},on:{change:function(s){t.$set(e,"model",n.value)}}}),s("label",{attrs:{for:e.setField+n.value}},[t._v(t._s(n.name))])])})):t._e(),"profile-edit"===t.type&&"select"===e.input?s("div",{staticClass:"select",class:{act:~t.activeDropdowns.indexOf(e.id)}},[s("input",{attrs:{type:"hidden"}}),s("span",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeDropdown(e),expression:"closeDropdown(field)"}],on:{click:function(s){t.toggleDropdown(e)}}},[t._v(t._s(e.model?e.model.name:e.empty||"РќРµ РІС‹Р±СЂР°РЅРѕ"))]),s("div",{staticClass:"select-popup"},t._l(e.options,function(n,i){return s("a",{key:i,attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.model=n}}},[t._v(t._s(n.name))])}))]):t._e()])}),t.error?s("div",{staticClass:"lk-row error"},[t._v("\n          "+t._s(t.error)+"\n        ")]):t._e(),"profile"===t.type?s("div",{key:"profile_buttons",staticClass:"lk-row"},[s("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("profile-edit")}}},[t._v("Р РµРґР°РєС‚РёСЂРѕРІР°С‚СЊ")])]):"profile-edit"===t.type?s("div",{key:"profile_buttons",staticClass:"lk-row"},[s("a",{staticClass:"red-btn edit",class:{disabled:t.saving},attrs:{href:"#",disabled:t.saving},on:{click:function(e){return e.preventDefault(),t.onSave(e)}}},[t._v("РЎРѕС…СЂР°РЅРёС‚СЊ")]),s("a",{staticClass:"red-btn cancel",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.onChange("profile")}}},[t._v("РћС‚РјРµРЅР°")])]):t._e()],2):t._e()])},ct=[],lt=(s("XfO3"),s("yt8O"),s("RW0V"),s("V+eJ"),s("+jP+")),ut=s("JDAR"),ft=s("Q5Zs"),dt=s.n(ft),_t=3e3,pt=3e3,ht=["+",/\d/," ","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,"-",/\d/,/\d/],mt={name:"AppPopupProfile",components:{Datepicker:lt["a"]},props:{type:String,default:"profile"},data:function(){return{datepickerLocale:ut["a"],activeDropdowns:[],phoneMask:ht,error:"",saving:!1}},filters:{gender:function(t){return 1===t?"РњСѓР¶СЃРєРѕР№":2===t&&"Р–РµРЅСЃРєРёР№"}},computed:Object(r["a"])({},Object(o["b"])(["currentUser","remoteConfig"]),{fields:function(){var t=this;return(this.remoteConfig&&this.remoteConfig.profile||[]).map(function(e){t.currentUser[e.getField];if("tag"===e.type){if("select"===e.input){var s=e.options.find(function(e){return t.$options.filters["tagExist"](e.value)});e.origin=s?Object.assign({},s):null,e.model=s?Object.assign({},s):null}}else if("system"===e.type||"redirect"===e.type){var n=t.currentUser[e.getField];if(n&&"phone"===e.input){var i=Object(ft["conformToMask"])(n,t.phoneMask,{guide:!1});i&&i.conformedValue&&(n=i.conformedValue)}e.origin=n,e.model=n}return e})}}),methods:{openDropdown:function(t){var e=this.activeDropdowns.indexOf(t.id);~e||this.activeDropdowns.push(t.id)},closeDropdown:function(t){var e=this;return function(){var s=e.activeDropdowns.indexOf(t.id);~s&&e.activeDropdowns.splice(s,1)}},toggleDropdown:function(t){var e=this.activeDropdowns.indexOf(t.id);~e?this.activeDropdowns.splice(e,1):this.activeDropdowns.push(t.id)},dateFormatter:function(t){return this.$moment(t).format("D MMMM YYYY")},getFieldValue:function(t){var e=t.model;return"tag"===t.type?"select"===t.input&&(e=t.origin&&t.origin.name):"system"!==t.type&&"redirect"!==t.type||t.filter&&(e=this.$options.filters[t.filter](e,t.filter_params)),e},onChange:function(t){this.$emit("onChange",t)},onUserUpdate:function(t){var e=this;return new Promise(function(s,n){if(t&&!t.length)return s();var i={};if(t.forEach(function(t){"date"===t.input?i[t.setField]=t.model?e.$moment(t.model).format("YYYY-MM-DD"):"":i[t.setField]=t.model}),!Object.keys(i).length)return s();e.$store.dispatch("userUpdate",i).then(s,n)})},onTagsUpdate:function(t){var e=this;return new Promise(function(s,n){var i={add:t.filter(function(t){var e=!t.origin||t.model.value!==t.origin.value;return t.model&&t.model.value&&e}).map(function(t){return t.model.value}).concat(t.filter(function(t){return t.flag_tag&&t.model.value&&!e.$options.filters["tagExist"](t.flag_tag)}).map(function(t){return t.flag_tag})),remove:t.filter(function(t){var e=!!t.origin&&t.model.value!==t.origin.value;return t.model&&t.model.value&&e}).map(function(t){return t.origin.value})};if(!i.add.length&&!i.remove.length)return s();e.$store.dispatch("changeTags",i).then(s,n)})},checkFirstUpdate:function(t){var e=this;return new Promise(function(s,n){if(t&&!t.length)return s();var i={add:[]},a=t.filter(function(t){return t.model&&"birth_date"===t.getField||t.model&&"car"===t.id||t.model&&"salary"===t.id});if(a||!a.length)return s();var r={birth_date:e.remoteConfig.birthDateTag,car:e.remoteConfig.carTag,salary:e.remoteConfig.salaryTag};if(a.forEach(function(t){var s;"birth_date"===t.getField?s=r.birth_date:"car"===t.id?s=r.car:"salary"===t.id&&(s=r.salary),e.$options.filters["tagExist"](s)||i.add.push(s)}),!i.add.length)return s();e.$store.dispatch("changeTags",i).then(s,n)})},checkRedirect:function(t){if(t.length>0){var e="".concat($["a"].profile_redirect_url,"?").concat(t.map(function(t){return"".concat(t.name,"=").concat(encodeURIComponent(t.value))}).join("&"));window.location.href=e}},onSave:function(){var t=this;this.saving=!0;var e=this.fields.filter(function(t){return"redirect"===t.type&&t.model!==t.origin}).map(function(t){return{name:t.setField,value:t.model}}),s=this.fields.filter(function(t){return"system"===t.type&&t.model!==t.origin}),n=this.fields.filter(function(t){return"tag"===t.type&&t.model}),i=[this.onUserUpdate(s),this.onTagsUpdate(n)];Promise.all(i).then(function(){setTimeout(function(){console.log("saving done"),t.error="",s.length?t.$store.dispatch("fetchUser").then(function(){n.length?t.$store.dispatch("fetchTags").then(function(){t.saving=!1,t.checkRedirect(e),t.onChange("profile")}):(t.checkRedirect(e),t.saving=!1,t.onChange("profile"))}):n.length?t.$store.dispatch("fetchTags").then(function(){t.checkRedirect(e),t.saving=!1,t.onChange("profile")}):(t.checkRedirect(e),t.saving=!1)},pt)},function(e){if(e&&"error"===e.status){var s=t.remoteConfig&&t.remoteConfig.profileError||{};t.error=s[e.status_code]||e.message}else t.error="РќРµРёР·РІРµСЃС‚РЅР°СЏ РѕС€РёР±РєР°";t.saving=!1,setTimeout(function(){t.error&&(t.error=!1)},_t)})}}},vt=mt,gt=Object(p["a"])(vt,ot,ct,!1,null,null,null),Ct=gt.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("span",{staticClass:"popup-head"},[t._v("РљР°РЅР°Р»С‹ РєРѕРјРјСѓРЅРёРєР°С†РёРё")]),s("span",{staticClass:"popup-desc"},[t._v("\n        РњС‹ С†РµРЅРёРј РІР°СЃ Рё Р±Р»Р°РіРѕРґР°СЂРёРј Р·Р° С‚Рѕ, С‡С‚Рѕ РІС‹ СЃ РЅР°РјРё. РџРѕСЌС‚РѕРјСѓ СЃ РєР°Р¶РґРѕР№ РїРѕРєСѓРїРєРё.\n    ")]),s("div",{staticClass:"lk-form"},[t._l(t.items,function(e,n){return s("div",{key:n,staticClass:"lk-row"},[s("div",{staticClass:"check-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"item.model"}],attrs:{type:"checkbox",name:"channel_"+n,id:"channel_"+n},domProps:{checked:Array.isArray(e.model)?t._i(e.model,null)>-1:e.model},on:{change:function(s){var n=e.model,i=s.target,a=!!i.checked;if(Array.isArray(n)){var r=null,o=t._i(n,r);i.checked?o<0&&t.$set(e,"model",n.concat([r])):o>-1&&t.$set(e,"model",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(e,"model",a)}}}),s("label",{attrs:{for:"channel_"+n}},[t._v(t._s(e.name))])])])}),s("div",{staticClass:"lk-row"},[s("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onChange(e)}}},[t._v("РЎРѕС…СЂР°РЅРёС‚СЊ")])]),t.saved?s("div",{staticClass:"lk-from-success"},[t._v("Р’СЃРµ РёР·РјРµРЅРµРЅРёСЏ СЃРѕС…СЂР°РЅРµРЅС‹")]):t._e()],2)])},yt=[],kt=(s("LK8F"),2e3),Ot=1e3,Et={name:"AppPopupChannels",data:function(){return{saved:!1,timeout:null}},computed:Object(r["a"])({},Object(o["b"])(["currentUser","remoteConfig"]),{items:function(){var t=this;return(this.remoteConfig&&this.remoteConfig.channels||[]).map(function(e){if("system"===e.type){var s=!!t.currentUser[e.getValue];e.origin=s,e.model=s}else if("tag"===e.type){var n=t.$options.filters["tagExist"](e.value);e.origin=n,e.model=n}return e})}}),methods:{onUserUpdate:function(t){var e=this;return new Promise(function(s,n){var i={};for(var a in t.forEach(function(t){Array.isArray(t.setValue)?(i[t.setValue[0]]=i[t.setValue[0]]||{},i[t.setValue[0]][t.setValue[1]]=t.model?1:0):i[t.setValue]=t.model}),i)i.hasOwnProperty(a)&&(i[a]=JSON.stringify(i[a]));if(!Object.keys(i).length)return s();e.$store.dispatch("userUpdate",i).then(s,n)})},onTagsUpdate:function(t){var e=this;return new Promise(function(s,n){var i={add:t.filter(function(t){return t.model&&t.model!==t.origin}).map(function(t){return t.value}),remove:t.filter(function(t){return!t.model&&t.model!==t.origin}).map(function(t){return t.value})};if(!i.add.length&&!i.remove.length)return s();e.$store.dispatch("changeTags",i).then(s,n)})},onChange:function(t){var e=this;this.timeout&&clearTimeout(this.timeout);var s=this.items.filter(function(t){return"system"===t.type&&t.model!==t.origin}),n=this.items.filter(function(t){return"tag"===t.type&&t.model!==t.origin}),i=[this.onUserUpdate(s),this.onTagsUpdate(n)];Promise.all(i).then(function(){s.length?(e.saved=!0,e.timeout=setTimeout(function(){e.saved=!1},kt),e.$store.dispatch("fetchUser",!0).then(function(t){n.length?setTimeout(function(){e.$store.dispatch("fetchTags",!0).then(function(s){e.$store.commit("updateUserInfo",t),e.$store.commit("updateTags",s.tags)})},Ot):e.$store.commit("updateUserInfo",t)})):n.length?(e.saved=!0,e.timeout=setTimeout(function(){e.saved=!1},kt),setTimeout(function(){e.$store.dispatch("fetchTags")},Ot)):e.saved=!1},function(){e.saved=!1})}}},Dt=Et,Pt=Object(p["a"])(Dt,bt,yt,!1,null,null,null),jt=Pt.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[t.edit?"store"===t.edit?s("div",{key:"store_editor"},[s("span",{staticClass:"popup-head"},[t._v("Р’С‹Р±РµСЂРёС‚Рµ РјР°РіР°Р·РёРЅС‹")]),s("div",{staticClass:"lk-form"},[s("div",{staticClass:"lk-row"},[s("div",{staticClass:"input-block search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchStoreString,expression:"searchStoreString"}],attrs:{type:"text",placeholder:"РџРѕРёСЃРє РїРѕ РЅР°Р·РІР°РЅРёСЋ"},domProps:{value:t.searchStoreString},on:{input:function(e){e.target.composing||(t.searchStoreString=e.target.value)}}})])]),s("div",{staticClass:"lk-form-shop-wrap"},[s("div",{staticClass:"lk-form-shop"},t._l(t.filteredStores,function(e,n){return s("div",{key:n,staticClass:"lk-row",attrs:{title:e.place}},[s("div",{staticClass:"check-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"store.model"}],attrs:{type:"checkbox",name:"store_"+n,id:"store_"+n},domProps:{checked:Array.isArray(e.model)?t._i(e.model,null)>-1:e.model},on:{change:function(s){var n=e.model,i=s.target,a=!!i.checked;if(Array.isArray(n)){var r=null,o=t._i(n,r);i.checked?o<0&&t.$set(e,"model",n.concat([r])):o>-1&&t.$set(e,"model",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(e,"model",a)}}}),s("label",{attrs:{for:"store_"+n}},[t._v(t._s(e.name))])])])}))]),s("div",{staticClass:"lk-row"},[s("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onSaveStores(e)}}},[t._v("РЎРѕС…СЂР°РЅРёС‚СЊ")]),s("a",{staticClass:"red-btn cancel",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit=!1}}},[t._v("РћС‚РјРµРЅР°")])])])]):"category"===t.edit?s("div",{key:"store_editor"},[s("span",{staticClass:"popup-head"},[t._v("Р’С‹Р±РµСЂРёС‚Рµ РєР°С‚РµРіРѕСЂРёРё")]),s("div",{staticClass:"category category-select"},t._l(t.categories,function(e,n){return s("a",{key:n,class:{act:e.model},attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.model=!e.model}}},[t._v(t._s(e.name))])})),s("div",{staticClass:"lk-form"},[s("div",{staticClass:"lk-row"},[s("a",{staticClass:"red-btn edit",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.onSaveCategories(e)}}},[t._v("РЎРѕС…СЂР°РЅРёС‚СЊ")]),s("a",{staticClass:"red-btn cancel",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit=!1}}},[t._v("РћС‚РјРµРЅР°")])])])]):t._e():s("div",{key:"store_editor"},[s("span",{staticClass:"popup-head"},[t._v("РњР°РіР°Р·РёРЅС‹")]),s("div",{staticClass:"shop"},t._l(t.currentUserStores,function(e){return s("div",{key:e.name,staticClass:"item",class:{hover:t.hoveredStore&&t.hoveredStore.name===e.name},on:{click:function(s){t.hoveredStore=e},mouseover:function(s){t.hoveredStore=e},mouseleave:function(e){t.hoveredStore=null}}},[s("span",{staticClass:"name"},[t._v("\n            "+t._s(e.name)+"\n        ")]),s("span",{staticClass:"num"},[t._v("\n            "+t._s(e.count)+" "+t._s(t._f("pluralize")(e.count,"РјР°РіР°Р·РёРЅ,РјР°РіР°Р·РёРЅР°,РјР°РіР°Р·РёРЅРѕРІ"))+"\n        ")]),s("img",{attrs:{src:e.logo}}),s("span",{staticClass:"red-btn dell",on:{click:function(s){s.preventDefault(),t.onDeleteStore(e)}}},[t._v("РЈРґР°Р»РёС‚СЊ")])])})),s("a",{staticClass:"btn-add",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit="store"}}},[t._v("Р”РѕР±Р°РІРёС‚СЊ РјР°РіР°Р·РёРЅ")]),s("span",{staticClass:"popup-head"},[t._v("РљР°С‚РµРіРѕСЂРёРё")]),s("div",{staticClass:"category"},t._l(t.currentUserCategories,function(e,n){return s("a",{key:n,class:{hover:t.hoveredStore===e},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.hoveredStore=e},mouseover:function(s){t.hoveredStore=e},mouseleave:function(e){t.hoveredStore=null}}},[t._v("\n        "+t._s(e)+"\n        "),s("span",{on:{click:function(s){t.onDeleteCategory(e)}}},[t._v("РЈРґР°Р»РёС‚СЊ")])])})),s("a",{staticClass:"btn-add",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.edit="category"}}},[t._v("Р”РѕР±Р°РІРёС‚СЊ РєР°С‚РµРіРѕСЂРёСЋ")])])])},Mt=[],Tt=1e3,Lt={name:"AppPopupFavorites",data:function(){return{holding:!1,edit:!1,stores:null,searchStoreString:"",hoveredStore:null,categories:null}},watch:{edit:function(){var t=this;this.searchStoreString="",this.stores=this.storeList.map(function(e){var s=t.$options.filters["tagExist"](e.name);return e.origin=s,e.model=s,e}),this.categories=this.storeCategories.map(function(e){var s=t.$options.filters["tagExist"](e);return{name:e,origin:s,model:s}})}},computed:Object(r["a"])({},Object(o["b"])(["storeList","storeCategories","currentUserCategories","currentUserStores","currentUser"]),{filteredStores:function(){var t=this;return this.stores.filter(function(e){return!t.searchStoreString.length||0===e.name.toLowerCase().indexOf(t.searchStoreString.toLowerCase())})}}),methods:{onSaveStores:function(){var t=this;if(!this.holding){var e={add:this.stores.filter(function(t){return t.model&&t.model!==t.origin}).map(function(t){return t.name}),remove:this.stores.filter(function(t){return!t.model&&t.model!==t.origin}).map(function(t){return t.name})};this.holding=!0,this.$store.dispatch("changeTags",e).then(function(){setTimeout(function(){t.$store.dispatch("fetchTags").then(function(){t.edit=!1,t.holding=!1})},Tt)})}},onDeleteStore:function(t){var e=this;this.holding||(this.holding=!0,this.$store.dispatch("changeTags",{remove:[t.name]}).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(function(){e.holding=!1})},Tt)}))},onSaveCategories:function(){var t=this;if(!this.holding){var e={add:this.categories.filter(function(t){return t.model&&t.model!==t.origin}).map(function(t){return t.name}),remove:this.categories.filter(function(t){return!t.model&&t.model!==t.origin}).map(function(t){return t.name})};this.holding=!0,this.$store.dispatch("changeTags",e).then(function(){setTimeout(function(){t.$store.dispatch("fetchTags").then(function(){t.edit=!1,t.holding=!1})},Tt)})}},onDeleteCategory:function(t){var e=this;this.holding||(this.holding=!0,this.$store.dispatch("changeTags",{remove:[t]}).then(function(){setTimeout(function(){e.$store.dispatch("fetchTags").then(function(){e.holding=!1})},Tt)}))}}},Ut=Lt,Bt=Object(p["a"])(Ut,wt,Mt,!1,null,null,null),At=Bt.exports,It=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"right"},[s("span",{staticClass:"popup-head"},[t._v("\n        РСЃС‚РѕСЂРёСЏ\n    ")]),t.currentHistory&&!t.currentHistory.length?s("span",{staticClass:"popup-desc"},[t._v("\n        РўСѓС‚ Р±СѓРґРµС‚ РёСЃС‚РѕСЂРёСЏ РІР°С€РёС… РґРµР№СЃС‚РІРёР№\n    ")]):t._e(),t.currentHistory&&t.currentHistory.length?s("div",{staticClass:"history"},[s("table",[t._m(0),t._l(t.currentHistory,function(e,n){return s("tr",{key:n},[s("td",[t._v(t._s(t._f("moment")(e.action_date,"DD MMM")))]),s("td",[s("span",{staticClass:"name"},[t._v(t._s(t.historyName(e)))]),t.historyName(e)!==e.name?s("span",{staticClass:"dop"},[t._v(t._s(e.name))]):t._e()]),s("td",[s("span",{staticClass:"ball"},[t._v(t._s(e.points_delta>0?"+"+e.points_delta:e.points_delta))])])])})],2)]):t._e()])},xt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("Р”Р°С‚Р°")]),s("th",[t._v("РЎРѕР±С‹С‚РёРµ")]),s("th",[t._v("Р‘Р°Р»Р»С‹")])])}],$t={purchase:"РџРѕРєСѓРїРєР°",gift_purchase:"РџРѕРґР°СЂРѕРє",badge:"Р‘РµР№РґР¶РёРє",registration:"Р РµРіРёСЃС‚СЂР°С†РёСЏ",referral:"Р РµРіРёСЃС‚СЂР°С†РёСЏ РґСЂСѓРіР°",referred:"Р РµРіРёСЃС‚СЂР°С†РёСЏ РїРѕ РїСЂРёРіР»Р°С€РµРЅРёСЋ",referred_purchase:"РџРѕРєСѓРїРєР° РїСЂРёРіР»Р°С€РµРЅРЅРѕРіРѕ РїРѕР»СЊР·РѕРІР°С‚РµР»СЏ",promocode:"Р—Р° РІРІРѕРґ РїСЂРѕРјРѕРєРѕРґР°",enter_group:"Р’СЃС‚СѓРїР»РµРЅРёРµ РІ РіСЂСѓРїРїСѓ ",share_purchase:"Р Р°СЃСЃРєР°Р· Рѕ РїРѕРєСѓРїРєРµ РІ ",social_share:"Р Р°СЃСЃРєР°Р· РІ ",share_badge:"Р Р°СЃСЃРєР°Р· Рѕ Р±РµР№РґР¶РёРєРµ РІ ",earn_badge:"РџРѕР»СѓС‡РµРЅ Р±РµР№РґР¶РёРє "},St={name:"AppPopupHistory",computed:Object(r["a"])({},Object(o["b"])(["currentHistory","remoteConfig"])),methods:{historyName:function(t){if(!t)return"";var e=this.remoteConfig&&this.remoteConfig.historyItems||$t;switch(t.action){case"custom_action":return t.name||"";case"event":return t.name||"";case"extra":return t.name||"";case"sharing":switch(t.social_action){case"like":return e.enter_group+t.social_type;case"purchase":return e.share_purchase+t.social_type;case"partner_page":return e.social_share+t.social_type;case"badge":return e.share_badge+t.social_type}}return e[t.action]||""}}},Rt=St,Wt=Object(p["a"])(Rt,It,xt,!1,null,null,null),Kt=Wt.exports,zt={name:"AppPopup",components:{AppPopupProfile:Ct,AppPopupChannels:jt,AppPopupFavorites:At,AppPopupHistory:Kt},data:function(){return{show:!1,type:null}},watch:{show:function(t){var e="lock-scroll";t?document.documentElement.classList.add(e):document.documentElement.classList.remove(e)}},computed:Object(r["a"])({},Object(o["b"])(["remoteConfig"]),{bannerStyles:function(){return this.remoteConfig&&this.remoteConfig.bannerImage?{"background-image":"url("+this.remoteConfig.bannerImage+")"}:{}}}),methods:{onChange:function(t){this.show=!!t,this.type=t}},beforeMount:function(){this.$eventBus.$on("popup",this.onChange)},beforeDestroy:function(){this.$eventBus.$off("popup",this.onChange)}},qt=zt,Gt=Object(p["a"])(qt,at,rt,!1,null,null,null),Ht=Gt.exports,Vt={data:function(){return{isMounted:!1}},props:{loading:Boolean,default:!1},components:{AppHeader:m,AppMain:k,AppGifts:T,AppQuests:H,AppBadges:J,AppShares:it,AppPopup:Ht},computed:Object(r["a"])({},Object(o["b"])(["remoteConfig","isInited"]),{menu:function(){if(this.isMounted)return[{alias:"home",name:"Р“Р»Р°РІРЅР°СЏ",ref:this.$refs["main"]},{alias:"gifts",name:"РџРѕРґР°СЂРєРё",ref:this.$refs["gifts"]},{alias:"quests",name:"Р—Р°РґР°РЅРёСЏ",ref:this.$refs["quests"]},{alias:"badges",name:"Р‘РµР№РґР¶Рё",ref:this.$refs["badges"],hide:this.remoteConfig&&!this.remoteConfig.showBadges},{alias:"shares",name:"Р РѕР·С‹РіСЂС‹С€Рё Рё Р°РєС†РёРё",ref:this.$refs["shares"]}]}}),methods:{onMenuClick:function(t){if(t.ref){var e=t.ref.$el&&t.ref.$el.getBoundingClientRect(),s=this.$refs["header"].$el.querySelector(".header").clientHeight,n=this.$refs["gifts"].$el.querySelector(".line").clientHeight,i=e.top+window.pageYOffset-s-n;0!==i&&window.scrollTo(e.left,i)}}},mounted:function(){this.isMounted=!0}},Nt=Vt,Ft=(s("nNx0"),Object(p["a"])(Nt,i,a,!1,null,null,null)),Yt=Ft.exports,Qt=s("8CdC"),Jt=s("p46w"),Xt=s.n(Jt);n["a"].use(o["a"]);var Zt="auth_hash_cookie",te=new o["a"].Store({state:{inited:!1,user:null,history:null,stores:null,tags:null,gifts:null,config:null,badges:null,quests:null},getters:{isInited:function(t){return t.inited},currentUser:function(t){return t.user&&t.user.user},currentPoints:function(t){return t.user&&t.user.user_points&&t.user.user_points.confirmed},currentHistory:function(t){return t.history},currentTags:function(t){return t.tags},storeList:function(t){return t.stores&&t.stores.list},storeCategories:function(t){return t.stores&&t.stores.categories},currentUserStores:function(t,e){return e.storeList&&e.currentTags&&e.storeList.filter(function(t){return~e.currentTags.map(function(t){return t.tag}).indexOf(t.name)})},currentUserCategories:function(t,e){return e.storeCategories&&e.currentTags&&e.storeCategories.filter(function(t){return~e.currentTags.map(function(t){return t.tag}).indexOf(t)})},remoteConfig:function(t){return t.config},giftList:function(t){return t.gifts},nextGifts:function(t,e){return e.currentUser&&e.giftList&&e.giftList.sort(function(t,e){return parseInt(t.points)-parseInt(e.points)}).filter(function(t){return t.points>e.currentPoints})},nextGift:function(t,e){return e.nextGifts&&e.nextGifts[0]},badgeList:function(t){return t.badges},questList:function(t){return t.quests}},mutations:{ready:function(t){t.inited=!0},updateUserInfo:function(t,e){t.user=e},updateHistory:function(t,e){t.history=e},updateTags:function(t,e){t.tags=e},updateStores:function(t,e){t.stores=e},updateGifts:function(t,e){t.gifts=e},updateConfig:function(t,e){t.config=e},updateBadges:function(t,e){t.badges=e},updateQuests:function(t,e){t.quests=e}},actions:{init:function(){return Qt["a"].init()},fetchUser:function(t,e){var s=t.commit;return new Promise(function(t,n){Qt["a"].userInfo().then(function(n){e||s("updateUserInfo",n),t(n)},n)})},fetchHistory:function(t){var e=t.commit;return new Promise(function(t,s){Qt["a"].userHistory().then(function(s){e("updateHistory",s),t(s)},s)})},fetchStores:function(t){var e=t.commit;return new Promise(function(t,s){fetch($["a"].stores_url||"stores.json").then(function(t){return t.json()},s).then(function(s){e("updateStores",s),t(s)},s)})},fetchTags:function(t,e){var s=t.commit;return new Promise(function(t,n){Qt["a"].userTags().then(function(n){e||s("updateTags",n.tags),t(n)},n)})},fetchGifts:function(t){var e=t.commit;return new Promise(function(t,s){Qt["a"].giftsList().then(function(s){if(s&&s.length){var n=s.map(function(t){try{t.data=JSON.parse(t.descr)}catch(t){}return t});e("updateGifts",n)}t(s)},s)})},fetchConfig:function(t){var e=t.commit;return new Promise(function(t,s){Qt["a"].config().then(function(s){e("updateConfig",s.config.config),t(s)},s)})},fetchQuests:function(t){var e=t.commit;return new Promise(function(t,s){Promise.all([Qt["a"].loadActions(),Qt["a"].loadCustomActions()]).then(function(s){var n=s.find(function(t){return!Array.isArray(t)}).actions,i=s.find(function(t){return Array.isArray(t)}),a=Object(B["a"])(n).concat(Object(B["a"])(i));e("updateQuests",a),t(a)},s)})},userUpdate:function(t,e){t.commit;return Qt["a"].userUpdate(e)},changeAvatar:function(t,e){t.commit;return Qt["a"].changeAvatar(e)},changeTags:function(t,e){t.commit;return new Promise(function(t,s){e.remove&&e.remove.length?Qt["a"].removeTags(e.remove).then(function(){e.add&&e.add.length?Qt["a"].addTags(e.add).then(t,s):t()},s):e.add&&e.add.length?Qt["a"].addTags(e.add).then(t,s):t()})},fetchBadges:function(t){var e=t.commit;return new Promise(function(t,s){Qt["a"].badgesList().then(function(s){if(s){var n=s.one_level_badges.map(function(t){try{t.data=JSON.parse(t.descr)}catch(t){}return t}),i=s.multilevel_badges.map(function(t){return t.map(function(t){try{t.data=JSON.parse(t.descr)}catch(t){}return t})});e("updateBadges",{oneLevelBadges:n,multilevelBadges:i})}t(s)})})},getGift:function(t,e){t.commit;return Qt["a"].getGift(e)},checkLogin:function(t){var e=t.commit,s=t.dispatch;return new Promise(function(t,n){var i=Xt.a.get($["a"].auth_cookie_name||Zt);i?Qt["a"].login(i).then(function(i){var a=s("fetchUser"),r=s("fetchHistory"),o=s("fetchStores"),c=s("fetchTags"),l=s("fetchGifts"),u=s("fetchConfig"),f=s("fetchBadges"),d=s("fetchQuests"),_=[a,r,o,c,l,u,f,d];return Promise.all(_).then(t,n).then(function(){e("ready")})},n):n(i)})}}}),ee=s("wd/R"),se=s.n(ee);s("lXzo"),s("LpSC"),s("oGbI"),s("L7TM");n["a"].component("masked-input",dt.a),n["a"].use(s("Lq01"),{moment:se.a}),n["a"].config.productionTip=!1,n["a"].prototype.$eventBus=new n["a"],n["a"].filter("tagExist",function(t){var e=te.getters.currentTags||[];return!!e.find(function(e){return e.tag===t})}),n["a"].filter("pluralize",function(t,e){var s=[2,0,1,1,1,2];return e=e.split(","),e[t%100>4&&t%100<20?2:s[t%10<5?t%10:5]]}),n["a"].directive("click-outside",{bind:function(t,e,s){if("function"!==typeof e.value){var n=s.context.name,i="[Vue-click-outside:] provided expression '".concat(e.expression,"' is not a function, but has to be");n&&(i+="Found in component '".concat(n,"'")),console.warn(i)}var a=e.modifiers.bubble,r=function(s){(a||!t.contains(s.target)&&t!==s.target)&&e.value(s)};t.__vueClickOutside__=r,document.addEventListener("click",r)},unbind:function(t,e){document.removeEventListener("click",t.__vueClickOutside__),t.__vueClickOutside__=null}}),new n["a"]({render:function(t){return t(Yt)},store:te,mounted:function(){n["a"].moment().locale("ru"),te.dispatch("init").then(function(){te.dispatch("checkLogin")})}}).$mount("#app")},nNx0:function(t,e,s){"use strict";var n=s("uWEC"),i=s.n(n);i.a},oGbI:function(t,e,s){},obyI:function(t,e,s){"use strict";s("VRzm");e["a"]={partner_id:1845,domain:"https://sailplay.ru",lang:"ru",profile_redirect_url:"http://example.com",remote_config_name:"dev"}},uWEC:function(t,e,s){}});
//# sourceMappingURL=app.e5b2b97c.js.map
